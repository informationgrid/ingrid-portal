delete from sys_generic_key where key_name='profileXML';
-- MySQL dump 10.13  Distrib 5.7.16, for Linux (x86_64)
--
-- Host: localhost    Database: igc
-- ------------------------------------------------------
-- Server version	5.7.16-0ubuntu0.16.04.1

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Dumping data for table `sys_generic_key`
--
-- WHERE:  key_name='profileXML'

LOCK TABLES `sys_generic_key` WRITE;
/*!40000 ALTER TABLE `sys_generic_key` DISABLE KEYS */;
INSERT INTO `sys_generic_key` VALUES (1343448,59,'profileXML','<?xml version=\"1.0\" encoding=\"UTF-8\"?><profile xmlns=\"http://www.portalu.de/igc-profile\" version=\"1.0.0\">\r\n  <name>IGC_CORE</name>\r\n  <supportedLanguages>en,de</supportedLanguages>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>general</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement5000</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1010</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1000</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[addressValidation();\r\ndijit.byId(\"objectName\").validator = function(value) { return dojo.trim(value) !== \"\"; };\r\n\r\ndojo.subscribe(\"/onBeforeObjectPublish\", function(/*Array*/notPublishableIDs) {\r\n    generalAddressPublishable(notPublishableIDs);\r\n});]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement6000</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\n// only visible in \'Geo-Information/Karte\' + \'Geodatendienst\' + \'Dienst/Anwendung/Informationssystem\'\r\nfunction uiElement6000IsVisibleInClass(objClass) {\r\n  if (objClass == \"Class1\" || objClass == \"Class3\" || objClass == \"Class6\") {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\ndojo.subscribe(\"/onObjectClassChange\", function(c) {\r\nif (uiElement6000IsVisibleInClass(c.objClass)) {\r\n  UtilUI.setShow(\"uiElement6000\");\r\n} else {\r\n  UtilUI.setHide(\"uiElement6000\");\r\n}});\r\n\r\n// make \'INSPIRE-Themen\' mandatory when selected except in \'Geodatendienst\'\r\n// make optional when unselected except in \'Geo-Information/Karte\'\r\nfunction uiElement6000InputHandler() {\r\n  // ONLY react if checkbox is visible in current class !\r\n  var objClass = UtilUdk.getObjectClass();\r\n  if (uiElement6000IsVisibleInClass(objClass)) {\r\n    if (dijit.byId(\"isInspireRelevant\").checked) {\r\n      if (objClass == \"Class3\") {\r\n\r\n  // !!! \'Geodatendienst\': \'INSPIRE-Themen\' OPTIONAL OR MANDATORY when checkbox selected ? Comment the one not wanted !\r\n\r\n        UtilUI.setOptional(\"uiElement5064\");\r\n//        UtilUI.setMandatory(\"uiElement5064\");\r\n\r\n      } else {\r\n        UtilUI.setMandatory(\"uiElement5064\");\r\n      }\r\n    } else {\r\n      if (objClass == \"Class1\") {\r\n        UtilUI.setMandatory(\"uiElement5064\");\r\n      } else {\r\n        UtilUI.setOptional(\"uiElement5064\");\r\n      }\r\n    }\r\n  }\r\n}\r\ndojo.connect(dijit.byId(\"isInspireRelevant\"), \"onChange\", function() {uiElement6000InputHandler();});\r\ndojo.connect(dijit.byId(\"isInspireRelevant\"), \"onClick\", function() {uiElement6000InputHandler();});\r\n// 3.2.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement6010</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement6020</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>thesaurus</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement5064</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n\r\n// START 3.4.0_a update\r\n// On change of object class:\r\n// Make \'INSPIRE-Themen\'(uiElement5064) optional, mandatory or hide it dependent from new class.\r\n\r\ndojo.subscribe(\"/onObjectClassChange\", function(c) {\r\nif (c.objClass == \"Class3\" || c.objClass == \"Class5\" || c.objClass == \"Class6\") {\r\n  // optional in \'Geodatendienst\' + \'Datensammlung/Datenbank\' + \'Informationssystem/Dienst/Anwendung\'\r\n  UtilUI.setOptional(\"uiElement5064\");\r\n} else if (c.objClass == \"Class1\") {\r\n  // mandatory in class \'Geo-Information/Karte\'\r\n  UtilUI.setMandatory(\"uiElement5064\");\r\n} else {\r\n  UtilUI.setHide(\"uiElement5064\");\r\n}});\r\n\r\n// Class 1: On input \'INSPIRE-Themen\'(uiElement5064 / thesaurusInspire)\r\n// - adapt content of \'Kodierungsschema der geographischen Daten\'(uiElement1315 / availabilityDataFormatInspire)\r\n// - show/hide DQ tables dependent from themes\r\n\r\n// Adapt \'Kodierungsschema\', \'KonformitÃ¤t\' etc. to \'INSPIRE-Themen\'. Also connects listener to INSPIRE themes.\r\n// !!! COMMENT the following line if \"dependent\" fields should NOT be adapted to \'INSPIRE-Themen\' !!!\r\napplyRuleThesaurusInspire();\r\n\r\n// initial show/hide of DQ tables dependent from themes\r\napplyRule7();\r\n\r\n// Input Handler for \'INSPIRE-Themen\' called when changed\r\nfunction uiElement5064InputHandler() {\r\n  var objClass = dijit.byId(\"objectClass\").getValue();\r\n  if (objClass == \"Class1\") {\r\n    //  Show/hide DQ tables in class 1 dependent from themes\r\n    applyRule7();\r\n  }\r\n}\r\ndojo.connect(UtilGrid.getTable(\"thesaurusInspire\"), \"onDataChanged\", uiElement5064InputHandler);\r\n// 3.4.0_a END\r\n\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5060</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\ndojo.subscribe(\"/onObjectClassChange\", function(c) {\r\n// only in \'Geo-Information/Karte\', then mandatory\r\nif (c.objClass == \"Class1\") {\r\n  UtilUI.setMandatory(\"uiElement5060\");\r\n} else {\r\n  UtilUI.setHide(\"uiElement5060\");\r\n}});\r\n// 3.2.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1409</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN014</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.connect(dijit.byId(\"thesaurusEnvExtRes\"), \"onChange\", function(val) {applyRule2();});\r\ndojo.connect(dijit.byId(\"thesaurusEnvExtRes\"), \"onClick\", function(obj, field) {applyRule2();});]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN015</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.connect(UtilGrid.getTable(\"thesaurusEnvTopics\"), \"onDataChanged\", applyRule2);]]></scriptedProperties>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>refClass1</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement3520</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN021</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5061</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5062</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.connect(UtilGrid.getTable(\"ref1Representation\"), \"onDataChanged\", applyRule1);]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5063</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN001</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN002</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3555</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[var validateFunction = dojo.partial(titleDateValidation, \"ref1SymbolsText\");\r\nUtilGrid.getTable(\"ref1SymbolsText\").validate = validateFunction;\r\ndojo.connect(UtilGrid.getTable(\"ref1SymbolsText\"), \"onCellChange\", validateFunction);\r\ndojo.connect(UtilGrid.getTable(\"ref1SymbolsText\"), \"onAddNewRow\", validateFunction);]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3535</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[var validateFunction = dojo.partial(titleDateValidation, \"ref1KeysText\");\r\nUtilGrid.getTable(\"ref1KeysText\").validate = validateFunction;\r\ndojo.connect(UtilGrid.getTable(\"ref1KeysText\"), \"onCellChange\", validateFunction);\r\ndojo.connect(UtilGrid.getTable(\"ref1KeysText\"), \"onAddNewRow\", validateFunction);]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5070</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\n// make \'SchlÃ¼sselkatalog\' mandatory on input \'Sachdaten/Attributinformation\'\r\nfunction uiElement5070InputHandler() {\r\n  if (UtilGrid.getTableData(\"ref1Data\").length !== 0) {\r\n    UtilUI.setMandatory(\"uiElement3535\");\r\n  } else {\r\n    UtilUI.setOptional(\"uiElement3535\");\r\n  }\r\n}\r\ndojo.connect(UtilGrid.getTable(\"ref1Data\"), \"onDataChanged\", uiElement5070InputHandler);\r\n// 3.2.0 END\r\n\r\n// START 3.3.0 update\r\n// avoid empty entries\r\nvar validateFunction = dojo.partial(emptyRowValidation, \"ref1Data\");\r\nUtilGrid.getTable(\"ref1Data\").validate = validateFunction;\r\n// 3.3.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN003</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3570</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3515</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <selectControl isExtendable=\"false\" useSyslist=\"10100\">\r\n        <id>bawAuftragsnummer</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n        <localizedLabel lang=\"de\">BAW / WSV Auftragsnummer</localizedLabel>\r\n        <localizedLabel lang=\"en\">BAW / WSV Auftragsnummer</localizedLabel>\r\n        <localizedHelp lang=\"de\">BAW / WSV Auftragsnummer</localizedHelp>\r\n        <localizedHelp lang=\"en\">BAW / WSV Auftragsnummer</localizedHelp>\r\n        <scriptedCswMapping><![CDATA[// ========================================================================================================================\r\n// ZusÃ¤tzliches Feld -> Liste: \"BAW/WSV Auftragsnummer\"\r\n// - ZusÃ¤tzliches Feld anlegen unter \"Allgemeines - Kategorien\"\r\n//   - Liste (Id:\'bawAuftragsnummer\', Sichtbarkeit: Pflichtfeld, Beschriftung:\'BAW/WSV Auftragsnummer\', Hilfetext:?)\r\n//   - nachfolgendes Javascript in Feld IDF-Mapping hinzufÃ¼gen\r\n// ========================================================================================================================\r\n\r\n\r\n// ------------------------\r\n// IDF\r\n// ------------------------\r\nimportPackage(Packages.de.ingrid.iplug.dsc.om);\r\n//add Namespaces to Utility for convenient handling of NS !\r\nDOM.addNS(\"gmd\", \"http://www.isotc211.org/2005/gmd\");\r\nDOM.addNS(\"gco\", \"http://www.isotc211.org/2005/gco\");\r\n\r\nif (!(sourceRecord instanceof DatabaseSourceRecord)) {\r\n  throw new IllegalArgumentException(\"Record is no DatabaseRecord!\");\r\n}\r\n\r\nvar id = sourceRecord.get(DatabaseSourceRecord.ID);\r\nvar igcProfileControlId = XPATH.getString(igcProfileControlNode, \"igcp:id\");\r\nvar simSpatialDimensionRecord = SQL.all(\"SELECT add1.data FROM additional_field_data add1 WHERE add1.obj_id=? AND add1.field_key=?\", [id, igcProfileControlId]);\r\nif (simSpatialDimensionRecord && simSpatialDimensionRecord.size() > 0) {\r\n	var simSpatialDimension = simSpatialDimensionRecord.get(0).get(\"data\");\r\n    if (simSpatialDimension) {\r\n        \r\n        var objRow = SQL.first(\"SELECT obj_class FROM t01_object WHERE id=?\", [id]);\r\n        var objClass = objRow.get(\"obj_class\");\r\n\r\n        var i;\r\n        var dataIdentification;\r\n        if (objClass.equals(\"3\")) {\r\n            dataIdentification = DOM.getElement(idfDoc, \"//idf:idfMdMetadata/gmd:identificationInfo/srv:SV_ServiceIdentification\");\r\n        } else {\r\n            dataIdentification = DOM.getElement(idfDoc, \"//idf:idfMdMetadata/gmd:identificationInfo/gmd:MD_DataIdentification\");\r\n        }\r\n        \r\n        var path = [\"gmd:resourceFormat\", \"gmd:graphicOverview\", \"gmd:resourceMaintenance\",\"gmd:pointOfContact\", \"gmd:status\",\"gmd:credit\",\"gmd:purpose\"];\r\n        \r\n        // find first present node from paths\r\n        var nodeBeforeInsert = null;\r\n        for (i=0; i<path.length; i++) {\r\n            // get the last occurrence of this path if any\r\n            nodeBeforeInsert = DOM.getElement(dataIdentification, path[i]+\"[last()]\");\r\n            if (nodeBeforeInsert) { break; }\r\n        }\r\n        \r\n        // write keyword and thesaurus\r\n        var keywords;\r\n        var keywordsParent;\r\n        if (nodeBeforeInsert) {\r\n            keywordsParent = nodeBeforeInsert.addElementAsSibling(\"gmd:descriptiveKeywords\");\r\n        } else {\r\n            keywordsParent = dataIdentification.addElement(\"gmd:descriptiveKeywords\");\r\n        }\r\n        keywords = keywordsParent.addElement(\"gmd:MD_Keywords\");\r\n        keywords.addElement(\"gmd:keyword/gco:CharacterString\").addText(simSpatialDimension);\r\n        keywords.addElement(\"gmd:type/gmd:MD_KeywordTypeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#MD_KeywordTypeCode\").addAttribute(\"codeListValue\", \"discipline\");\r\n        var thesCitation = keywords.addElement(\"gmd:thesaurusName/gmd:CI_Citation\");\r\n        thesCitation.addElement(\"gmd:title/gco:CharacterString\").addText(\"DEBUNDBAWAUFTRAGNR\");\r\n        var ciDate = thesCitation.addElement(\"gmd:date/gmd:CI_Date\");\r\n        ciDate.addElement(\"gmd:date/gco:Date\").addText(\"2016-05-12\");\r\n        ciDate.addElement(\"gmd:dateType/gmd:CI_DateTypeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#CI_DateTypeCode\").addAttribute(\"codeListValue\", \"publication\");\r\n    }\r\n}]]></scriptedCswMapping>\r\n        <scriptedCswMappingImport><![CDATA[// ------------------------\r\n\r\n// import BAW Auftragsnummer, remove from general keywords\r\nvar keywords = XPATH.getNodeList(source, \"//gmd:descriptiveKeywords/gmd:MD_Keywords[normalize-space(./gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)=\'DEBUNDBAWAUFTRAGNR\']/gmd:keyword/gco:CharacterString\");\r\nfor (var i=0; i<keywords.getLength(); i++ ) {\r\n    var keyword = keywords.item(i).getTextContent();\r\n    // find the keyword in local lookup list\r\n    var id = codeListService.getSysListEntryKey(10100, keyword, \"\", false);\r\n    \r\n    var targetEl = target.getDocumentElement();\r\n    var additionalValues = XPATH.createElementFromXPath(targetEl, \"/igc/data-sources/data-source/data-source-instance/general/general-additional-values\");\r\n    var additionalValue = DOM.addElement(additionalValues, \"general-additional-value\");\r\n    additionalValue.addElement(\"field-key\").addText(\"bawAuftragsnummer\");\r\n    additionalValue.addElement(\"field-data\").addAttribute(\"id\", id).addText(keyword);\r\n    // remove keyword from uncontroled terms\r\n    XPATH.removeElementAtXPath(targetEl, \"//uncontrolled-term[.=\'\"+keyword+\"\']\");\r\n}\r\n\r\n// import Simulation: RÃ¤umliche DimensionalitÃ¤t, remove from general keywords\r\nvar keywords = XPATH.getNodeList(source, \"//gmd:descriptiveKeywords/gmd:MD_Keywords[normalize-space(./gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)=\'BAW-DMQS Spatial Dimensions\']/gmd:keyword/gco:CharacterString\");\r\nfor (var i=0; i<keywords.getLength(); i++ ) {\r\n    var keyword = keywords.item(i).getTextContent();\r\n    // find the keyword in local lookup list\r\n    var id = codeListService.getSysListEntryKey(10101, keyword, \"\", false); \r\n    \r\n    var targetEl = target.getDocumentElement();\r\n    var additionalValues = XPATH.createElementFromXPath(targetEl, \"/igc/data-sources/data-source/data-source-instance/general/general-additional-values\");\r\n    var additionalValue = DOM.addElement(additionalValues, \"general-additional-value\");\r\n    additionalValue.addElement(\"field-key\").addText(\"simSpatialDimension\");\r\n    additionalValue.addElement(\"field-data\").addAttribute(\"id\", id).addText(keyword);\r\n    // remove keyword from uncontroled terms\r\n    XPATH.removeElementAtXPath(targetEl, \"//uncontrolled-term[.=\'\"+keyword+\"\']\");\r\n}\r\n\r\n// import Simulation: Verfahren, remove from general keywords\r\nvar keywords = XPATH.getNodeList(source, \"//gmd:descriptiveKeywords/gmd:MD_Keywords[normalize-space(./gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)=\'BAW-DMQS Modelling Method\']/gmd:keyword/gco:CharacterString\");\r\nfor (var i=0; i<keywords.getLength(); i++ ) {\r\n    var keyword = keywords.item(i).getTextContent();\r\n    // find the keyword in local lookup list\r\n    var id = codeListService.getSysListEntryKey(10102, keyword, \"\", false); \r\n\r\n    var targetEl = target.getDocumentElement();\r\n    var additionalValues = XPATH.createElementFromXPath(targetEl, \"/igc/data-sources/data-source/data-source-instance/general/general-additional-values\");\r\n    var additionalValue = DOM.addElement(additionalValues, \"general-additional-value\");\r\n    additionalValue.addElement(\"field-key\").addText(\"simProcess\");\r\n    additionalValue.addElement(\"field-data\").addAttribute(\"id\", id).addText(keyword);\r\n    // remove keyword from uncontroled terms\r\n    XPATH.removeElementAtXPath(targetEl, \"//uncontrolled-term[.=\'\"+keyword+\"\']\");\r\n}\r\n\r\n// import Simulation: Modellart, remove from general keywords\r\nvar keywords = XPATH.getNodeList(source, \"//gmd:descriptiveKeywords/gmd:MD_Keywords[normalize-space(./gmd:thesaurusName/gmd:CI_Citation/gmd:title/gco:CharacterString)=\'BAW-DMQS Modelling Type\']/gmd:keyword/gco:CharacterString\");\r\nfor (var i=0; i<keywords.getLength(); i++ ) {\r\n    var keyword = keywords.item(i).getTextContent();\r\n    // find the keyword in local lookup list\r\n    var id = codeListService.getSysListEntryKey(10103, keyword, \"\", false);\r\n    var targetEl = target.getDocumentElement();\r\n    var additionalValues = XPATH.createElementFromXPath(targetEl, \"/igc/data-sources/data-source/data-source-instance/general/general-additional-values\");\r\n    var additionalValue = DOM.addElement(additionalValues, \"general-additional-value\").addAttribute(\"line\", (i+1));\r\n    additionalValue.addElement(\"field-key\").addText(\"simModelType\");\r\n    additionalValue.addElement(\"field-data\").addAttribute(\"id\", id).addText(keyword);\r\n    additionalValue.addElement(\"field-key-parent\").addText(\"simModelTypeTable\");\r\n    // remove keyword from uncontroled terms\r\n    XPATH.removeElementAtXPath(targetEl, \"//uncontrolled-term[.=\'\"+keyword+\"\']\");\r\n}\r\n\r\n// import Simulation: Zeitliche AuflÃ¶sung\r\nvar values = XPATH.getNodeList(source, \"//gmd:DQ_AccuracyOfATimeMeasurement/gmd:result/gmd:DQ_QuantitativeResult[./gmd:valueUnit/gml:UnitDefinition/gml:name=\'second\']/gmd:value/gco:Record\");\r\nfor (var i=0; i<values.getLength(); i++ ) {\r\n    var value = values.item(i).getTextContent();\r\n    var targetEl = target.getDocumentElement();\r\n    var additionalValues = XPATH.createElementFromXPath(targetEl, \"/igc/data-sources/data-source/data-source-instance/general/general-additional-values\");\r\n    var additionalValue = DOM.addElement(additionalValues, \"general-additional-value\");\r\n    additionalValue.addElement(\"field-key\").addText(\"dqAccTimeMeas\");\r\n    additionalValue.addElement(\"field-data\").addText(value);\r\n}\r\n\r\n// import Simulation: DQS Daten\r\nvar dqQualityNodes = XPATH.getNodeList(source, \"//gmd:DQ_DataQuality[./gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode/@codeListValue=\'model\']\");\r\nfor (var i=0; i<dqQualityNodes.getLength(); i++ ) {\r\n    var dqQualityNode = dqQualityNodes.item(i);\r\n    var targetEl = target.getDocumentElement();\r\n    var additionalValues = XPATH.createElementFromXPath(targetEl, \"/igc/data-sources/data-source/data-source-instance/general/general-additional-values\");\r\n    \r\n    var simParamTypeVal = XPATH.getString(dqQualityNode, \"gmd:lineage/gmd:LI_Lineage/gmd:source/gmd:LI_Source/gmd:description/gco:CharacterString\");\r\n    if (simParamTypeVal == null) continue;\r\n    \r\n    var records = [ \r\n              {\"key\":\"simParamName\", \"value\":XPATH.getString(dqQualityNode, \"gmd:report/gmd:DQ_QuantitativeAttributeAccuracy/gmd:result/gmd:DQ_QuantitativeResult/gmd:valueType/gco:RecordType\")},\r\n              {\"key\":\"simParamType\", \"value\":simParamTypeVal,\"id\":codeListService.getSysListEntryKey(10104, simParamTypeVal, \"\", false)},\r\n              {\"key\":\"simParamUnit\", \"value\":XPATH.getString(dqQualityNode, \"gmd:report/gmd:DQ_QuantitativeAttributeAccuracy/gmd:result/gmd:DQ_QuantitativeResult/gmd:valueUnit/gml:UnitDefinition/gml:name\")},\r\n              {\"key\":\"simParamValue\", \"value\":XPATH.getString(dqQualityNode, \"gmd:report/gmd:DQ_QuantitativeAttributeAccuracy/gmd:result/gmd:DQ_QuantitativeResult/gmd:value/gco:Record\")},\r\n              {\"key\":\"simParamInfo\", \"value\":XPATH.getString(dqQualityNode, \"gmd:report/gmd:DQ_QuantitativeAttributeAccuracy/gmd:result/@xlink:href\")},\r\n              {\"key\":\"simParamMdInfo\", \"value\":XPATH.getString(dqQualityNode, \"gmd:lineage/gmd:LI_Lineage/gmd:source/@xlink:href\")}\r\n            ];\r\n \r\n    var record;\r\n    for (record in records) {\r\n        var additionalValue = additionalValues.appendChild(targetEl.getOwnerDocument().createElement(\"general-additional-value\"));\r\n        XMLUtils.createOrReplaceAttribute(additionalValue, \"line\", (i+1));\r\n        XMLUtils.createOrReplaceTextNode(XPATH.createElementFromXPath(additionalValue, \"field-key\"), records[record].key);\r\n        var fieldData = XPATH.createElementFromXPath(additionalValue, \"field-data\");\r\n        XMLUtils.createOrReplaceAttribute(fieldData, \"id\", records[record].id ? records[record].id : \"-1\");\r\n        XMLUtils.createOrReplaceTextNode(fieldData, records[record].value);\r\n        XMLUtils.createOrReplaceTextNode(XPATH.createElementFromXPath(additionalValue, \"field-key-parent\"), \"simParamTable\");\r\n    }\r\n}\r\n\r\n// change address import: \r\n//  * remove institutions if they have no email address\r\n//  * in addresses that hold references to that address, remove the reference to the institution and change type to \"Freie Adresse\"\r\nvar unitsWithoutEmail = XPATH.getNodeList(targetEl, \"//addresses/address/address-instance[not(communication/communication-medium/@id=3) and type-of-address/@id=0]\");\r\nfor (var i=0; i<unitsWithoutEmail.getLength(); i++ ) {\r\n    var unitsWithoutEmailNode = unitsWithoutEmail.item(i);\r\n    var unitsWithoutEmailsUUID = XPATH.getString(unitsWithoutEmailNode, \"./address-identifier\");\r\n    // get all referencing addresses\r\n    var referencingAdresses = XPATH.getNodeList(targetEl, \"//addresses/address/address-instance[./parent-address/address-identifier = \'\" + unitsWithoutEmailsUUID + \"\']\");\r\n    for (var j=0; j<referencingAdresses.getLength(); j++ ) {\r\n        var referencingAdressesNode = referencingAdresses.item(j);\r\n        // change type of address to \"Freie Adresse\"\r\n        XMLUtils.createOrReplaceAttribute(XPATH.getNode(referencingAdressesNode, \"./type-of-address\"), \"id\", \"3\");\r\n        // remove reference to institution\r\n        XPATH.removeElementAtXPath(referencingAdressesNode, \"./parent-address\");\r\n    }\r\n    // remove the institution\r\n    XMLUtils.remove( unitsWithoutEmailNode )\r\n}\r\n\r\n// set address type of \"gmd:contact\" adresses to pointOfContactMd\r\nvar contactMdNodes = XPATH.getNodeList(source, \"//gmd:contact/gmd:CI_ResponsibleParty\");\r\nfor (var i=0; i<contactMdNodes.getLength(); i++) {\r\n    var contactMdNode = contactMdNodes.item(i);\r\n    var ContactMdUUID = createUUIDFromAddress(contactMdNode);\r\n    var relatedAddresses = XPATH.getNodeList(targetEl, \"//related-address[./type-of-relation/@entry-id=7 and address-identifier=\'\"+ContactMdUUID+\"\']\");\r\n    for (var j=0; j<relatedAddresses.getLength(); j++) {\r\n        var relatedAddressNode = relatedAddresses.item(j);\r\n        XMLUtils.createOrReplaceAttribute(XPATH.getNode(relatedAddressNode, \"./type-of-relation\"), \"entry-id\", \"12\");\r\n        XMLUtils.createOrReplaceTextNode(XPATH.getNode(relatedAddressNode, \"./type-of-relation\"), \"pointOfContactMd\");\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction createUUIDFromAddress(source) {\r\n    log.debug(\"create UUID from address node: \" + source);\r\n    var isoUuid = XPATH.getString(source, \"./@uuid\");\r\n    var organisationName = XPATH.getString(source, \"gmd:organisationName/gco:CharacterString\");\r\n    var individualName = XPATH.getString(source, \"gmd:individualName/gco:CharacterString\");\r\n    var email = XPATH.getString(source, \"gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress/gco:CharacterString\");\r\n    \r\n    var idString = \"\";\r\n    if (hasValue(organisationName)) {\r\n        idString += organisationName;\r\n    }\r\n    if (hasValue(individualName)) {\r\n        idString += individualName;\r\n    }\r\n    if (hasValue(email)) {\r\n        idString += email;\r\n    }\r\n    \r\n    var uuid;\r\n    // first check for valid uuid to be used for address identification\r\n    if (hasValue(isoUuid)) {\r\n        uuid = isoUuid;\r\n    } else if (hasValue(idString) && (hasValue(email) || (hasValue(organisationName) && hasValue(individualName)))) {\r\n        // otherwise create a uuid from the content, to try to find an address\r\n        // this should work if same address was referenced without a uuid\r\n        uuid = createUUIDFromString(idString.toString());\r\n    } else {\r\n        // if no content was given, create a completely new uuid\r\n        protocol(INFO, \"Insufficient data for UUID creation (no \'email\' or only one of \'individualName\' or \'organisationName\' has been set for this address: email=\'\" + email + \"\', individualName=\'\" + individualName + \"\', organisationName=\'\" + organisationName + \"\'!)\")\r\n        protocol(INFO, \"A new random UUID will be created!\")\r\n        log.info(\"Insufficient data for UUID creation (no \'email\' or only one of \'individualName\' or \'organisationName\' has been set for this address: email=\'\" + email + \"\', individualName=\'\" + individualName + \"\', organisationName=\'\" + organisationName + \"\'!)\");\r\n        log.info(\"A new random UUID will be created!\");\r\n        uuid = createUUID();\r\n    }\r\n    log.info(\"Created UUID from Address:\" + uuid);\r\n    \r\n    return uuid;\r\n}\r\n\r\nfunction createUUIDFromString(str) {\r\n    // replace multiple white spaces by \' \'\r\n    var uuid = java.util.UUID.nameUUIDFromBytes((new java.lang.String(str).replaceAll(\"\\\\s+\", \" \")).getBytes());\r\n    var idcUuid = new java.lang.StringBuffer(uuid.toString().toUpperCase());\r\n    while (idcUuid.length() < 36) {\r\n        idcUuid.append(\"0\");\r\n    }\r\n    uuid = idcUuid.toString();\r\n    return uuid;\r\n}\r\n\r\n        ]]></scriptedCswMappingImport>\r\n        <indexName>bawAuftragsnummer</indexName>\r\n        <layoutWidth>100</layoutWidth>\r\n        <selectionList>\r\n          <items lang=\"de\"/>\r\n          <items lang=\"en\"/>\r\n        </selectionList>\r\n      </selectControl>\r\n      <selectControl isExtendable=\"false\" useSyslist=\"10101\">\r\n        <id>simSpatialDimension</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n        <localizedLabel lang=\"de\">Simulation / RÃ¤umliche DimensionalitÃ¤t</localizedLabel>\r\n        <localizedLabel lang=\"en\">Simulation / RÃ¤umliche DimensionalitÃ¤t</localizedLabel>\r\n        <localizedHelp lang=\"de\">Simulation / RÃ¤umliche DimensionalitÃ¤t</localizedHelp>\r\n        <localizedHelp lang=\"en\">Simulation / RÃ¤umliche DimensionalitÃ¤t</localizedHelp>\r\n        <scriptedCswMapping><![CDATA[// ========================================================================================================================\r\n// ZusÃ¤tzliches Feld -> Liste: \"Simulation / RÃ¤umliche DimensionalitÃ¤t\"\r\n// - ZusÃ¤tzliches Feld anlegen unter \"Allgemeines - Kategorien\"\r\n//   - Liste (Id:\'simSpatialDimension\', Sichtbarkeit: Pflichtfeld, Beschriftung:\'Simulation / RÃ¤umliche DimensionalitÃ¤t\', Hilfetext:?)\r\n//   - nachfolgendes Javascript in Feld IDF-Mapping hinzufÃ¼gen\r\n// ========================================================================================================================\r\n\r\n\r\n// ------------------------\r\n// IDF\r\n// ------------------------\r\nimportPackage(Packages.de.ingrid.iplug.dsc.om);\r\n//add Namespaces to Utility for convenient handling of NS !\r\nDOM.addNS(\"gmd\", \"http://www.isotc211.org/2005/gmd\");\r\nDOM.addNS(\"gco\", \"http://www.isotc211.org/2005/gco\");\r\n\r\nif (!(sourceRecord instanceof DatabaseSourceRecord)) {\r\n  throw new IllegalArgumentException(\"Record is no DatabaseRecord!\");\r\n}\r\n\r\nvar id = sourceRecord.get(DatabaseSourceRecord.ID);\r\nvar igcProfileControlId = XPATH.getString(igcProfileControlNode, \"igcp:id\");\r\nvar simSpatialDimensionRecord = SQL.all(\"SELECT add1.data FROM additional_field_data add1 WHERE add1.obj_id=? AND add1.field_key=?\", [id, igcProfileControlId]);\r\nif (simSpatialDimensionRecord && simSpatialDimensionRecord.size() > 0) {\r\n	var simSpatialDimension = simSpatialDimensionRecord.get(0).get(\"data\");\r\n    if (simSpatialDimension) {\r\n        \r\n        var objRow = SQL.first(\"SELECT obj_class FROM t01_object WHERE id=?\", [id]);\r\n        var objClass = objRow.get(\"obj_class\");\r\n\r\n        var i;\r\n        var dataIdentification;\r\n        if (objClass.equals(\"3\")) {\r\n            dataIdentification = DOM.getElement(idfDoc, \"//idf:idfMdMetadata/gmd:identificationInfo/srv:SV_ServiceIdentification\");\r\n        } else {\r\n            dataIdentification = DOM.getElement(idfDoc, \"//idf:idfMdMetadata/gmd:identificationInfo/gmd:MD_DataIdentification\");\r\n        }\r\n        \r\n        var path = [\"gmd:resourceFormat\", \"gmd:graphicOverview\", \"gmd:resourceMaintenance\",\"gmd:pointOfContact\", \"gmd:status\",\"gmd:credit\",\"gmd:purpose\"];\r\n        \r\n        // find first present node from paths\r\n        var nodeBeforeInsert = null;\r\n        for (i=0; i<path.length; i++) {\r\n            // get the last occurrence of this path if any\r\n            nodeBeforeInsert = DOM.getElement(dataIdentification, path[i]+\"[last()]\");\r\n            if (nodeBeforeInsert) { break; }\r\n        }\r\n        \r\n        // write keyword and thesaurus\r\n        var keywords;\r\n        var keywordsParent;\r\n        if (nodeBeforeInsert) {\r\n            keywordsParent = nodeBeforeInsert.addElementAsSibling(\"gmd:descriptiveKeywords\");\r\n        } else {\r\n            keywordsParent = dataIdentification.addElement(\"gmd:descriptiveKeywords\");\r\n        }\r\n        keywords = keywordsParent.addElement(\"gmd:MD_Keywords\");\r\n        keywords.addElement(\"gmd:keyword/gco:CharacterString\").addText(simSpatialDimension);\r\n        keywords.addElement(\"gmd:type/gmd:MD_KeywordTypeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#MD_KeywordTypeCode\").addAttribute(\"codeListValue\", \"theme\");\r\n        var thesCitation = keywords.addElement(\"gmd:thesaurusName/gmd:CI_Citation\");\r\n        thesCitation.addElement(\"gmd:title/gco:CharacterString\").addText(\"BAW-DMQS Spatial Dimensions\");\r\n        var ciDate = thesCitation.addElement(\"gmd:date/gmd:CI_Date\");\r\n        ciDate.addElement(\"gmd:date/gco:Date\").addText(\"2016-04-08\");\r\n        ciDate.addElement(\"gmd:dateType/gmd:CI_DateTypeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#CI_DateTypeCode\").addAttribute(\"codeListValue\", \"publication\");\r\n    }\r\n}]]></scriptedCswMapping>\r\n        <indexName>simSpatialDimension</indexName>\r\n        <layoutWidth>50</layoutWidth>\r\n        <selectionList>\r\n          <items lang=\"de\"/>\r\n          <items lang=\"en\"/>\r\n        </selectionList>\r\n      </selectControl>\r\n      <selectControl isExtendable=\"false\" useSyslist=\"\">\r\n        <id>simProcess</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n        <localizedLabel lang=\"de\">Simulation / Verfahren</localizedLabel>\r\n        <localizedLabel lang=\"en\">Simulation / Verfahren</localizedLabel>\r\n        <localizedHelp lang=\"de\">Angewandtes Modellverfahren der Berechnung.</localizedHelp>\r\n        <localizedHelp lang=\"en\">Angewandtes Modellverfahren der Berechnung.</localizedHelp>\r\n        <scriptedCswMapping><![CDATA[//========================================================================================================================\r\n//ZusÃ¤tzliches Feld -> Liste: \"Simulation / Verfahren\"\r\n//TODO:\r\n//- ZusÃ¤tzliches Feld anlegen unter \"Allgemeines - Kategorien\"\r\n//- Liste (Id:\'simProcess\', Sichtbarkeit: Pflichtfeld, Beschriftung:\'Simulation / Verfahren\', Hilfetext:?)\r\n//- nachfolgendes Javascript in Feld IDF-Mapping hinzufÃ¼gen\r\n//========================================================================================================================\r\n\r\n\r\n//------------------------\r\n//IDF\r\n//------------------------\r\nimportPackage(Packages.de.ingrid.iplug.dsc.om);\r\n//add Namespaces to Utility for convenient handling of NS !\r\nDOM.addNS(\"gmd\", \"http://www.isotc211.org/2005/gmd\");\r\nDOM.addNS(\"gco\", \"http://www.isotc211.org/2005/gco\");\r\n\r\nif (!(sourceRecord instanceof DatabaseSourceRecord)) {\r\nthrow new IllegalArgumentException(\"Record is no DatabaseRecord!\");\r\n}\r\n\r\nvar id = sourceRecord.get(DatabaseSourceRecord.ID);\r\nvar igcProfileControlId = XPATH.getString(igcProfileControlNode, \"igcp:id\");\r\nvar simProcessRecord = SQL.all(\"SELECT add1.data FROM additional_field_data add1 WHERE add1.obj_id=? AND add1.field_key=?\", [id, igcProfileControlId]);\r\nif (simProcessRecord && simProcessRecord.size() > 0) {\r\n	var simProcess = simProcessRecord.get(0).get(\"data\");\r\n if (simProcess) {\r\n     \r\n     var objRow = SQL.first(\"SELECT obj_class FROM t01_object WHERE id=?\", [id]);\r\n     var objClass = objRow.get(\"obj_class\");\r\n\r\n     var i;\r\n     var dataIdentification;\r\n     if (objClass.equals(\"3\")) {\r\n         dataIdentification = DOM.getElement(idfDoc, \"//idf:idfMdMetadata/gmd:identificationInfo/srv:SV_ServiceIdentification\");\r\n     } else {\r\n         dataIdentification = DOM.getElement(idfDoc, \"//idf:idfMdMetadata/gmd:identificationInfo/gmd:MD_DataIdentification\");\r\n     }\r\n     \r\n     var path = [\"gmd:resourceFormat\", \"gmd:graphicOverview\", \"gmd:resourceMaintenance\",\"gmd:pointOfContact\", \"gmd:status\",\"gmd:credit\",\"gmd:purpose\"];\r\n     \r\n     // find first present node from paths\r\n     var nodeBeforeInsert = null;\r\n     for (i=0; i<path.length; i++) {\r\n         // get the last occurrence of this path if any\r\n         nodeBeforeInsert = DOM.getElement(dataIdentification, path[i]+\"[last()]\");\r\n         if (nodeBeforeInsert) { break; }\r\n     }\r\n     \r\n     // write keyword and thesaurus\r\n     var keywords;\r\n     var keywordsParent;\r\n     if (nodeBeforeInsert) {\r\n         keywordsParent = nodeBeforeInsert.addElementAsSibling(\"gmd:descriptiveKeywords\");\r\n     } else {\r\n         keywordsParent = dataIdentification.addElement(\"gmd:descriptiveKeywords\");\r\n     }\r\n     keywords = keywordsParent.addElement(\"gmd:MD_Keywords\");\r\n     keywords.addElement(\"gmd:keyword/gco:CharacterString\").addText(simProcess);\r\n     keywords.addElement(\"gmd:type/gmd:MD_KeywordTypeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#MD_KeywordTypeCode\").addAttribute(\"codeListValue\", \"theme\");\r\n     var thesCitation = keywords.addElement(\"gmd:thesaurusName/gmd:CI_Citation\");\r\n     thesCitation.addElement(\"gmd:title/gco:CharacterString\").addText(\"BAW-DMQS Modelling Method\");\r\n     var ciDate = thesCitation.addElement(\"gmd:date/gmd:CI_Date\");\r\n     ciDate.addElement(\"gmd:date/gco:Date\").addText(\"2016-04-08\");\r\n     ciDate.addElement(\"gmd:dateType/gmd:CI_DateTypeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#CI_DateTypeCode\").addAttribute(\"codeListValue\", \"publication\");;\r\n }\r\n}]]></scriptedCswMapping>\r\n        <indexName>simProcess</indexName>\r\n        <layoutWidth>50</layoutWidth>\r\n        <selectionList>\r\n          <items lang=\"de\">\r\n            <item id=\"1\">BSQUAT</item>\r\n            <item id=\"2\">Cascade</item>\r\n            <item id=\"3\">Delft3D 4</item>\r\n            <item id=\"4\">Delft3D FM</item>\r\n            <item id=\"5\">HEC-6T</item>\r\n            <item id=\"6\">Hec-Ras</item>\r\n            <item id=\"7\">Hydro-AS</item>\r\n            <item id=\"8\">k-Modell</item>\r\n            <item id=\"9\">NCAGGREGATE</item>\r\n            <item id=\"10\">NCANALYSE</item>\r\n            <item id=\"11\">NCAUTO</item>\r\n            <item id=\"12\">NCDELTA</item>\r\n            <item id=\"13\">NCPLOT</item>\r\n            <item id=\"14\">OpenFOAM</item>\r\n            <item id=\"15\">PeTra2d</item>\r\n            <item id=\"16\">Rismo2D</item>\r\n            <item id=\"17\">SediMorph</item>\r\n            <item id=\"18\">STAR-CCM+</item>\r\n            <item id=\"19\">Telemac</item>\r\n            <item id=\"20\">UnTRIM</item>\r\n            <item id=\"21\">UnTRIM2007</item>\r\n            <item id=\"22\">UnTRIM2009</item>\r\n            <item id=\"23\">kein</item>\r\n          </items>\r\n          <items lang=\"en\">\r\n            <item id=\"1\">BSQUAT</item>\r\n            <item id=\"2\"/>\r\n            <item id=\"3\">?</item>\r\n            <item id=\"4\">?</item>\r\n            <item id=\"5\">?</item>\r\n            <item id=\"6\">?</item>\r\n            <item id=\"7\">?</item>\r\n            <item id=\"8\">?</item>\r\n            <item id=\"9\">?</item>\r\n            <item id=\"10\">?</item>\r\n            <item id=\"11\">?</item>\r\n            <item id=\"12\">?</item>\r\n            <item id=\"13\">?</item>\r\n            <item id=\"14\">?</item>\r\n            <item id=\"15\">?</item>\r\n            <item id=\"16\">?</item>\r\n            <item id=\"17\">?</item>\r\n            <item id=\"18\">?</item>\r\n            <item id=\"19\">?</item>\r\n            <item id=\"20\">?</item>\r\n            <item id=\"21\">?</item>\r\n            <item id=\"22\">?</item>\r\n            <item id=\"23\">?</item>\r\n          </items>\r\n        </selectionList>\r\n      </selectControl>\r\n      <tableControl>\r\n        <id>simModelTypeTable</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n        <localizedLabel lang=\"de\">Simulation / Modellart</localizedLabel>\r\n        <localizedLabel lang=\"en\">Simulation / Modellart</localizedLabel>\r\n        <localizedHelp lang=\"de\">Eigenschaften des Modells / der simulierten Prozesse.</localizedHelp>\r\n        <localizedHelp lang=\"en\">Eigenschaften des Modells / der simulierten Prozesse.</localizedHelp>\r\n        <scriptedCswMapping><![CDATA[//========================================================================================================================\r\n//ZusÃ¤tzliches Feld -> Liste: \"Simulation / Modellart\"\r\n//TODO:\r\n//- ZusÃ¤tzliches Feld anlegen unter \"Allgemeines - Kategorien\"\r\n//- Tabelle (Id:\'simModelTypeTable\', Sichtbarkeit: Pflichtfeld, Beschriftung:\'Simulation / Modellart\', Hilfetext:?)\r\n//  - Spalten: (Type: Liste, id:simModelType, indexName:simModelType)\r\n//- nachfolgendes Javascript in Feld IDF-Mapping hinzufÃ¼gen\r\n//========================================================================================================================\r\n\r\n\r\n//------------------------\r\n//IDF\r\n//------------------------\r\nimportPackage(Packages.de.ingrid.iplug.dsc.om);\r\n//add Namespaces to Utility for convenient handling of NS !\r\nDOM.addNS(\"gmd\", \"http://www.isotc211.org/2005/gmd\");\r\nDOM.addNS(\"gco\", \"http://www.isotc211.org/2005/gco\");\r\n\r\nif (!(sourceRecord instanceof DatabaseSourceRecord)) {\r\nthrow new IllegalArgumentException(\"Record is no DatabaseRecord!\");\r\n}\r\n\r\nvar id = sourceRecord.get(DatabaseSourceRecord.ID);\r\nvar igcProfileControlId = XPATH.getString(igcProfileControlNode, \"igcp:id\");\r\nvar columnName = \'simModelType\'; // the column of the table to get the value from\r\nvar columnData = SQL.all(\"SELECT add2.data, add2.list_item_id FROM additional_field_data add1, additional_field_data add2 WHERE add1.obj_id=? AND add1.field_key=? AND add2.parent_field_id=add1.id AND add2.field_key=?\", [id, igcProfileControlId, columnName]);\r\n\r\nif ( columnData && columnData.size() > 0) {\r\n\r\n   var objRow = SQL.first(\"SELECT obj_class FROM t01_object WHERE id=?\", [id]);\r\n   var objClass = objRow.get(\"obj_class\");\r\n\r\n   var i;\r\n   var dataIdentification;\r\n   if (objClass.equals(\"3\")) {\r\n       dataIdentification = DOM.getElement(idfDoc, \"//idf:idfMdMetadata/gmd:identificationInfo/srv:SV_ServiceIdentification\");\r\n   } else {\r\n       dataIdentification = DOM.getElement(idfDoc, \"//idf:idfMdMetadata/gmd:identificationInfo/gmd:MD_DataIdentification\");\r\n   }\r\n   \r\n   var path = [\"gmd:resourceFormat\", \"gmd:graphicOverview\", \"gmd:resourceMaintenance\",\"gmd:pointOfContact\", \"gmd:status\",\"gmd:credit\",\"gmd:purpose\"];\r\n   \r\n   // find first present node from paths\r\n   var nodeBeforeInsert = null;\r\n   for (i=0; i<path.length; i++) {\r\n       // get the last occurrence of this path if any\r\n       nodeBeforeInsert = DOM.getElement(dataIdentification, path[i]+\"[last()]\");\r\n       if (nodeBeforeInsert) { break; }\r\n   }\r\n   \r\n   // write keyword and thesaurus\r\n   var keywords;\r\n   var keywordsParent;\r\n   if (nodeBeforeInsert) {\r\n       keywordsParent = nodeBeforeInsert.addElementAsSibling(\"gmd:descriptiveKeywords\");\r\n   } else {\r\n       keywordsParent = dataIdentification.addElement(\"gmd:descriptiveKeywords\");\r\n   }\r\n   keywords = keywordsParent.addElement(\"gmd:MD_Keywords\");\r\n   for (i=0; i<columnData.size(); i++) {\r\n	      keywords.addElement(\"gmd:keyword/gco:CharacterString\").addText(columnData.get(i).get(\"data\"));\r\n   }\r\n   keywords.addElement(\"gmd:type/gmd:MD_KeywordTypeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#MD_KeywordTypeCode\").addAttribute(\"codeListValue\", \"theme\");\r\n   var thesCitation = keywords.addElement(\"gmd:thesaurusName/gmd:CI_Citation\");\r\n   thesCitation.addElement(\"gmd:title/gco:CharacterString\").addText(\"BAW-DMQS Modelling Type\");\r\n   var ciDate = thesCitation.addElement(\"gmd:date/gmd:CI_Date\");\r\n   ciDate.addElement(\"gmd:date/gco:Date\").addText(\"2016-04-08\");\r\n   ciDate.addElement(\"gmd:dateType/gmd:CI_DateTypeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#CI_DateTypeCode\").addAttribute(\"codeListValue\", \"publication\");;\r\n}]]></scriptedCswMapping>\r\n        <indexName/>\r\n        <layoutWidth>100</layoutWidth>\r\n        <layoutNumLines>4</layoutNumLines>\r\n        <columns>\r\n          <selectControl isExtendable=\"false\" useSyslist=\"\">\r\n            <id>simModelType</id>\r\n            <localizedLabel lang=\"de\"/>\r\n            <localizedLabel lang=\"en\"/>\r\n            <indexName>simModelType</indexName>\r\n            <layoutWidth>100</layoutWidth>\r\n            <selectionList>\r\n              <items lang=\"de\">\r\n                <item id=\"1\">fahrdynamisch</item>\r\n                <item id=\"2\">Feststofftransportmodell</item>\r\n                <item id=\"3\">numerisch-hydraulisch</item>\r\n                <item id=\"4\">gegenstÃ¤ndlich-hydraulisch</item>\r\n                <item id=\"5\">hydrodynamisch</item>\r\n                <item id=\"6\">hydrologisch</item>\r\n                <item id=\"7\">Mehrphasenmodell</item>\r\n                <item id=\"8\">Naturversuch</item>\r\n                <item id=\"9\">numerisch</item>\r\n                <item id=\"10\">gegenstÃ¤ndlich</item>\r\n                <item id=\"11\">Advektion</item>\r\n                <item id=\"12\">Diffusion</item>\r\n                <item id=\"13\">Turbulenz</item>\r\n              </items>\r\n              <items lang=\"en\">\r\n                <item id=\"1\">?</item>\r\n                <item id=\"2\">?</item>\r\n                <item id=\"3\">?</item>\r\n                <item id=\"4\">?</item>\r\n                <item id=\"5\">?</item>\r\n                <item id=\"6\">?</item>\r\n                <item id=\"7\">?</item>\r\n                <item id=\"8\">?</item>\r\n                <item id=\"9\">?</item>\r\n                <item id=\"10\">?</item>\r\n                <item id=\"11\">?</item>\r\n                <item id=\"12\">?</item>\r\n                <item id=\"13\">?</item>\r\n              </items>\r\n            </selectionList>\r\n          </selectControl>\r\n        </columns>\r\n      </tableControl>\r\n      <tableControl>\r\n        <id>simParamTable</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n        <localizedLabel lang=\"de\">Daten / GrÃ¶Ãen / Parameter</localizedLabel>\r\n        <localizedLabel lang=\"en\">Daten / GrÃ¶Ãen / Parameter</localizedLabel>\r\n        <localizedHelp lang=\"de\">Mit diesem Datensatz assoziierte Daten / Beschreibung der physikalischen GrÃ¶Ãen im Datensatz / Parameter eines Datensatzes.</localizedHelp>\r\n        <localizedHelp lang=\"en\">Mit diesem Datensatz assoziierte Daten / Beschreibung der physikalischen GrÃ¶Ãen im Datensatz / Parameter eines Datensatzes.</localizedHelp>\r\n        <scriptedCswMapping><![CDATA[//========================================================================================================================\r\n//ZusÃ¤tzliches Feld -> Liste: \"Daten / GrÃ¶Ãen / Parameter\"\r\n//TODO:\r\n//- ZusÃ¤tzliches Feld anlegen unter \"Allgemeines - Kategorien\"\r\n//- Tabelle (Id:\'simParamTable\', Sichtbarkeit: , Beschriftung:\'Daten / GrÃ¶Ãen / Parameter\', Hilfetext:?)\r\n//- Spalten: (Type: Liste, id:simParamType, indexName:simParamType)\r\n//- Spalten: (Type: Text, id:simParamName, indexName:simParamName)\r\n//- Spalten: (Type: Text, id:simParamUnit, indexName:simParamUnit)\r\n//- Spalten: (Type: Text, id:simParamValue, indexName:simParamValue)\r\n//- Spalten: (Type: Text, id:simParamInfo, indexName:simParamInfo)\r\n//- Spalten: (Type: Text, id:simParamMdInfo, indexName:simParamMdInfo)\r\n//- nachfolgendes Javascript in Feld IDF-Mapping hinzufÃ¼gen\r\n//========================================================================================================================\r\n\r\n\r\n//------------------------\r\n//IDF\r\n//------------------------\r\nimportPackage(Packages.de.ingrid.iplug.dsc.om);\r\n//add Namespaces to Utility for convenient handling of NS !\r\nDOM.addNS(\"gmd\", \"http://www.isotc211.org/2005/gmd\");\r\nDOM.addNS(\"gco\", \"http://www.isotc211.org/2005/gco\");\r\nDOM.addNS(\"gml\", \"http://www.opengis.net/gml\");\r\nDOM.addNS(\"xlink\", \"http://www.w3.org/1999/xlink\");\r\n\r\nif (!(sourceRecord instanceof DatabaseSourceRecord)) {\r\nthrow new IllegalArgumentException(\"Record is no DatabaseRecord!\");\r\n}\r\n\r\nvar id = sourceRecord.get(DatabaseSourceRecord.ID);\r\nvar igcProfileControlId = XPATH.getString(igcProfileControlNode, \"igcp:id\");\r\n\r\n\r\nvar rowData = SQL.all(\"SELECT DISTINCT add2.sort, add2.parent_field_id FROM additional_field_data add1, additional_field_data add2 WHERE add1.obj_id=? AND add1.field_key=? AND add2.parent_field_id=add1.id ORDER BY add2.sort\", [id, igcProfileControlId]);\r\nif ( rowData && rowData.size() > 0) {\r\n	log.info(\"Record ID: \" + id );\r\n	log.info(\"rowData.size(): \" + rowData.size() );\r\n\r\n	// find node to add the ISO elements to\r\n	var mdMetadata = DOM.getElement(idfDoc, \"//idf:idfMdMetadata\");\r\n	var path = [\"gmd:dataQualityInfo\", \"gmd:distributionInfo\", \"gmd:contentInfo\",\"gmd:identificationInfo\"];\r\n	// find first present node from paths\r\n	var nodeBeforeInsert = null;\r\n	for (var i=0; i<path.length; i++) {\r\n	    // get the last occurrence of this path if any\r\n	    nodeBeforeInsert = DOM.getElement(mdMetadata, path[i]+\"[last()]\");\r\n	    if (nodeBeforeInsert) { break; }\r\n	}\r\n    if (nodeBeforeInsert) {\r\n    	dataQualitySibling = nodeBeforeInsert;\r\n	} else {\r\n	    log.error(\"Could not find any element in [gmd:dataQualityInfo, gmd:distributionInfo, gmd:contentInfo, gmd:identificationInfo] to attache the dataquality Node to. Error Mapping record: \" + sourceRecord.toString());\r\n	}\r\n	\r\n	// iterate over DGS table rows\r\n	for (var i=0; i<rowData.size(); i++) {\r\n		\r\n		// initialize variables\r\n		var simParamType = null;\r\n		var simParamMdInfo = null;\r\n		var simParamName = null;\r\n		var simParamUnit = null;\r\n		var simParamValue = null;\r\n		var simParamInfo = null;\r\n\r\n		// gather the DGS data for this row\r\n		var sort = rowData.get(i).get(\"sort\");\r\n		log.info(\"sort: \" + sort);\r\n		var parentFieldId = rowData.get(i).get(\"parent_field_id\");\r\n		var columnData = SQL.all(\"SELECT add1.data, add1.list_item_id, add1.field_key FROM additional_field_data add1 WHERE add1.parent_field_id=? AND add1.sort=?\", [parentFieldId, sort]);\r\n		for (var j=0; j<columnData.size(); j++) {\r\n			log.info(\"Add: \" + columnData.get(j).get(\"field_key\"));\r\n			\r\n			if (columnData.get(j).get(\"field_key\") == \"simParamType\") {\r\n				simParamType = columnData.get(j).get(\"data\");\r\n			}\r\n			if (columnData.get(j).get(\"field_key\") == \"simParamMdInfo\") {\r\n				simParamMdInfo = columnData.get(j).get(\"data\");\r\n			}\r\n			if (columnData.get(j).get(\"field_key\") == \"simParamName\") {\r\n				simParamName = columnData.get(j).get(\"data\");\r\n			}\r\n			if (columnData.get(j).get(\"field_key\") == \"simParamUnit\") {\r\n				simParamUnit = columnData.get(j).get(\"data\");\r\n			}\r\n			if (columnData.get(j).get(\"field_key\") == \"simParamValue\") {\r\n				simParamValue = columnData.get(j).get(\"data\");\r\n			}\r\n			if (columnData.get(j).get(\"field_key\") == \"simParamInfo\") {\r\n				simParamInfo = columnData.get(j).get(\"data\");\r\n			}\r\n		}\r\n		\r\n		// now build the ISO XML from the data\r\n		var dataQuality = dataQualitySibling.addElementAsSibling(\"gmd:dataQualityInfo\");\r\n		var dqDataQuality = dataQuality.addElement(\"gmd:DQ_DataQuality\");\r\n		dqDataQuality.addElement(\"gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#MD_ScopeCode\").addAttribute(\"codeListValue\", \"model\");\r\n		// 	Online-Ressource: /MD_Metadata/dataQualityInfo/DQ_DataQuality/report/DQ_QuantitativeAttributeAccuracy/result[@href]\r\n		var dqQuantitativeResult = dqDataQuality.addElement(\"gmd:report/gmd:DQ_QuantitativeAttributeAccuracy/gmd:result\").addAttribute(\"xlink:href\", simParamInfo).addElement(\"gmd:DQ_QuantitativeResult\");\r\n		// 	Name: /MD_Metadata/dataQualityInfo/DQ_DataQuality/report/DQ_QuantitativeAttributeAccuracy/result/DQ_QuantitativeResult/valueType\r\n		dqQuantitativeResult.addElement(\"gmd:valueType/gco:RecordType\").addText(simParamName);\r\n		// 	Einheit: /MD_Metadata/dataQualityInfo/DQ_DataQuality/report/DQ_QuantitativeAttributeAccuracy/result/DQ_QuantitativeResult/valueUnit\r\n		var unitDefinition = dqQuantitativeResult.addElement(\"gmd:valueUnit\").addElement(\"gml:UnitDefinition\").addAttribute(\"gml:id\", \"unitDefinition_ID_\" + Math.floor(Math.random()*1000));\r\n		unitDefinition.addElement(\"gml:identifier\").addAttribute(\"codeSpace\", \"\");\r\n		unitDefinition.addElement(\"gml:name\").addText(simParamUnit);\r\n		// 	Werte / Wertebereich: /MD_Metadata/dataQualityInfo/DQ_DataQuality/report/DQ_QuantitativeAttributeAccuracy/result/DQ_QuantitativeResult/value\r\n		dqQuantitativeResult.addElement(\"gmd:value/gco:Record\").addText(simParamValue);\r\n		\r\n		// 	Metadaten-Verweis: /MD_Metadata/dataQualityInfo/DQ_DataQuality/lineage/LI_Lineage/source[@href]\r\n		var liSource = dqDataQuality.addElement(\"gmd:lineage/gmd:LI_Lineage\").addElement(\"gmd:source\").addAttribute(\"xlink:href\", simParamMdInfo);\r\n		// Rolle: /MD_Metadata/dataQualityInfo/DQ_DataQuality/lineage/LI_Lineage/source/LI_Source/description\r\n		liSource.addElement(\"gmd:LI_Source\").addElement(\"gmd:description/gco:CharacterString\").addText(simParamType);\r\n		dataQualitySibling = dataQuality;\r\n	  }\r\n}]]></scriptedCswMapping>\r\n        <indexName/>\r\n        <layoutWidth>100</layoutWidth>\r\n        <layoutNumLines>4</layoutNumLines>\r\n        <columns>\r\n          <selectControl isExtendable=\"false\" useSyslist=\"\">\r\n            <id>simParamType</id>\r\n            <localizedLabel lang=\"de\">Rolle</localizedLabel>\r\n            <localizedLabel lang=\"en\">Rolle</localizedLabel>\r\n            <indexName>simParamType</indexName>\r\n            <layoutWidth>100</layoutWidth>\r\n            <selectionList>\r\n              <items lang=\"de\">\r\n                <item id=\"1\">Bathymetrie</item>\r\n                <item id=\"2\">Randbedingung</item>\r\n                <item id=\"3\">Anfangsbedingung</item>\r\n                <item id=\"4\">Ergebnis</item>\r\n                <item id=\"5\">Kennwert</item>\r\n                <item id=\"6\">Grafik</item>\r\n                <item id=\"7\">Peilung</item>\r\n                <item id=\"8\">Steuerungsdaten</item>\r\n                <item id=\"9\">Protokoll</item>\r\n              </items>\r\n              <items lang=\"en\">\r\n                <item id=\"1\"/>\r\n                <item id=\"2\">?</item>\r\n                <item id=\"3\">?</item>\r\n                <item id=\"4\">?</item>\r\n                <item id=\"5\">?</item>\r\n                <item id=\"6\">?</item>\r\n                <item id=\"7\">?</item>\r\n                <item id=\"8\">?</item>\r\n                <item id=\"9\">?</item>\r\n              </items>\r\n            </selectionList>\r\n          </selectControl>\r\n          <textControl isExtendable=\"false\" useSyslist=\"\">\r\n            <id>simParamName</id>\r\n            <localizedLabel lang=\"de\">Name</localizedLabel>\r\n            <localizedLabel lang=\"en\">Name</localizedLabel>\r\n            <indexName>simParamName</indexName>\r\n            <layoutWidth>100</layoutWidth>\r\n          </textControl>\r\n          <textControl isExtendable=\"false\" useSyslist=\"\">\r\n            <id>simParamUnit</id>\r\n            <localizedLabel lang=\"de\">Einheit</localizedLabel>\r\n            <localizedLabel lang=\"en\">Einheit</localizedLabel>\r\n            <indexName>simParamUnit</indexName>\r\n            <layoutWidth>100</layoutWidth>\r\n          </textControl>\r\n          <textControl isExtendable=\"false\" useSyslist=\"\">\r\n            <id>simParamValue</id>\r\n            <localizedLabel lang=\"de\">Wert</localizedLabel>\r\n            <localizedLabel lang=\"en\">Wert</localizedLabel>\r\n            <indexName>simParamValue</indexName>\r\n            <layoutWidth>100</layoutWidth>\r\n          </textControl>\r\n          <textControl isExtendable=\"false\" useSyslist=\"\">\r\n            <id>simParamInfo</id>\r\n            <localizedLabel lang=\"de\">Online-Ressource</localizedLabel>\r\n            <localizedLabel lang=\"en\">Online-Ressource</localizedLabel>\r\n            <indexName>simParamInfo</indexName>\r\n            <layoutWidth>100</layoutWidth>\r\n          </textControl>\r\n          <textControl isExtendable=\"false\" useSyslist=\"\">\r\n            <id>simParamMdInfo</id>\r\n            <localizedLabel lang=\"de\">Metadaten-Verweis</localizedLabel>\r\n            <localizedLabel lang=\"en\">Metadaten-Verweis</localizedLabel>\r\n            <indexName>simParamMdInfo</indexName>\r\n            <layoutWidth>100</layoutWidth>\r\n          </textControl>\r\n        </columns>\r\n      </tableControl>\r\n      <textControl>\r\n        <id>dqAccTimeMeas</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n        <localizedLabel lang=\"de\">Zeitliche Genauigkeit [sec]</localizedLabel>\r\n        <localizedLabel lang=\"en\">Zeitliche Genauigkeit [sec]</localizedLabel>\r\n        <localizedHelp lang=\"de\">SimulationszeitschrittgrÃ¶Ãe (nicht: Frequenz der Speicherung) in Sekunden.</localizedHelp>\r\n        <localizedHelp lang=\"en\">SimulationszeitschrittgrÃ¶Ãe (nicht: Frequenz der Speicherung) in Sekunden.</localizedHelp>\r\n        <scriptedCswMapping><![CDATA[//========================================================================================================================\r\n//ZusÃ¤tzliches Feld -> Liste: \"Zeitliche Genauigkeit\"\r\n//TODO:\r\n//- ZusÃ¤tzliches Feld anlegen unter \"Fachbezug\"\r\n//- Text (Id:\'dqAccTimeMeas\', Sichtbarkeit: Pflichtfeld, Beschriftung:\'dqAccTimeMeas\', Hilfetext:?)\r\n//- nachfolgendes Javascript in Feld IDF-Mapping hinzufÃ¼gen\r\n//========================================================================================================================\r\n\r\n\r\n//------------------------\r\n//IDF\r\n//------------------------\r\nimportPackage(Packages.de.ingrid.iplug.dsc.om);\r\n//add Namespaces to Utility for convenient handling of NS !\r\nDOM.addNS(\"gmd\", \"http://www.isotc211.org/2005/gmd\");\r\nDOM.addNS(\"gco\", \"http://www.isotc211.org/2005/gco\");\r\nDOM.addNS(\"gml\", \"http://www.opengis.net/gml\");\r\nDOM.addNS(\"xlink\", \"http://www.w3.org/1999/xlink\");\r\n\r\n\r\nif (!(sourceRecord instanceof DatabaseSourceRecord)) {\r\nthrow new IllegalArgumentException(\"Record is no DatabaseRecord!\");\r\n}\r\n\r\nvar id = sourceRecord.get(DatabaseSourceRecord.ID);\r\nvar igcProfileControlId = XPATH.getString(igcProfileControlNode, \"igcp:id\");\r\nvar valueRecord = SQL.all(\"SELECT add1.data FROM additional_field_data add1 WHERE add1.obj_id=? AND add1.field_key=?\", [id, igcProfileControlId]);\r\nif (valueRecord && valueRecord.size() > 0) {\r\n	var value = valueRecord.get(0).get(\"data\");\r\n	if (value) {\r\n		// find node to add the ISO elements to\r\n		var mdMetadata = DOM.getElement(idfDoc, \"//idf:idfMdMetadata\");\r\n		var path = [\"gmd:dataQualityInfo\", \"gmd:distributionInfo\", \"gmd:contentInfo\",\"gmd:identificationInfo\"];\r\n		// find first present node from paths\r\n		var nodeBeforeInsert = null;\r\n		for (var i=0; i<path.length; i++) {\r\n		    // get the last occurrence of this path if any\r\n		    nodeBeforeInsert = DOM.getElement(mdMetadata, path[i]+\"[last()]\");\r\n		    if (nodeBeforeInsert) { break; }\r\n		}\r\n	    if (nodeBeforeInsert) {\r\n	    	dataQualitySibling = nodeBeforeInsert;\r\n		} else {\r\n		    log.error(\"Could not find any element in [gmd:dataQualityInfo, gmd:distributionInfo, gmd:contentInfo, gmd:identificationInfo] to attache the dataquality Node to. Error Mapping record: \" + sourceRecord.toString());\r\n		}\r\n\r\n		// now build the ISO XML from the data\r\n		var dataQuality = dataQualitySibling.addElementAsSibling(\"gmd:dataQualityInfo\");\r\n		var dqDataQuality = dataQuality.addElement(\"gmd:DQ_DataQuality\");\r\n		dqDataQuality.addElement(\"gmd:scope/gmd:DQ_Scope/gmd:level/gmd:MD_ScopeCode\").addAttribute(\"codeList\", \"http://www.isotc211.org/2005/resources/codeList.xml#MD_ScopeCode\").addAttribute(\"codeListValue\", \"model\");\r\n		var dqQuantitativeResult = dqDataQuality.addElement(\"gmd:report/gmd:DQ_AccuracyOfATimeMeasurement/gmd:result/gmd:DQ_QuantitativeResult\");\r\n		// 	Name: /MD_Metadata/dataQualityInfo/DQ_DataQuality/report/DQ_QuantitativeAttributeAccuracy/result/DQ_QuantitativeResult/valueType\r\n		dqQuantitativeResult.addElement(\"gmd:valueType/gco:RecordType\").addText(\"temporal accuracy\");\r\n		// 	Einheit: /MD_Metadata/dataQualityInfo/DQ_DataQuality/report/DQ_QuantitativeAttributeAccuracy/result/DQ_QuantitativeResult/valueUnit\r\n		var unitDefinition = dqQuantitativeResult.addElement(\"gmd:valueUnit\").addElement(\"gml:UnitDefinition\").addAttribute(\"gml:id\", \"unitDefinition_sec_\" + Math.floor(Math.random()*1000));\r\n		unitDefinition.addElement(\"gml:identifier\").addAttribute(\"codeSpace\", \"\");\r\n		unitDefinition.addElement(\"gml:name\").addText(\"second\");\r\n		unitDefinition.addElement(\"gml:catalogSymbol\").addText(\"s\");\r\n		// 	Werte / Wertebereich: /MD_Metadata/dataQualityInfo/DQ_DataQuality/report/DQ_QuantitativeAttributeAccuracy/result/DQ_QuantitativeResult/value\r\n		dqQuantitativeResult.addElement(\"gmd:value/gco:Record\").addText(value);\r\n\r\n	}\r\n}]]></scriptedCswMapping>\r\n        <indexName>dqAccTimeMeas</indexName>\r\n        <layoutWidth>50</layoutWidth>\r\n        <layoutNumLines>1</layoutNumLines>\r\n      </textControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>refClass1DQ</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement3565</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\ndojo.subscribe(\"/onObjectClassChange\", function(c) {\r\n// show Rubrik \'DatenqualitÃ¤t\' only in \'Geo-Information/Karte\'\r\nif (c.objClass == \"Class1\") {\r\n  UtilUI.setShow(\"refClass1DQ\");\r\n} else {\r\n  UtilUI.setHide(\"refClass1DQ\");\r\n}});\r\n// 3.2.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5069</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3530</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement7509</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.subscribe(\"/onBeforeObjectPublish\", function(/*Array*/notPublishableIDs) {\r\n    dqTablesPublishable(notPublishableIDs);\r\n});]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement7512</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement7513</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement7514</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement7515</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement7520</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement7525</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement7526</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement7527</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>refClass2</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement3355</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3350</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3340</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3310</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3330</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3320</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3300</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3365</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3370</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3360</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3385</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3210</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3380</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3375</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>refClass3</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElementN022</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3220</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3225</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3221</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\n// make \'Basisdaten\' mandatory on input \'tight\'\r\ndojo.connect(dijit.byId(\"ref3CouplingType\"), \"onChange\", function(value) {\r\n  if (value === \"tight\") {\r\n    UtilUI.setMandatory(\"uiElement3345\");\r\n  } else {\r\n    UtilUI.setOptional(\"uiElement3345\");\r\n  }\r\n});\r\n// 3.2.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3230</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN004</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\n// check the content of the operation table before publish\r\ndojo.subscribe(\"/onBeforeObjectPublish\", function(/*Array*/notPublishableIDs) {\r\n    ref3OperationPublishable(notPublishableIDs);\r\n});\r\n// 3.2.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN023</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3200</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3240</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3345</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\n// on input change Kopplungstyp\r\ndojo.connect(dijit.byId(\"ref3BaseDataLink\"), \"onDataChanged\", function() {\r\n  var couplingType = dijit.byId(\"ref3CouplingType\");\r\n  var isMixed = couplingType.value == \"mixed\";\r\n  if (isMixed != true) {\r\n    if (this.data.length > 0) {\r\n      couplingType.set(\"value\", \"tight\");\r\n    } else {\r\n      couplingType.set(\"value\", \"loose\");\r\n    }\r\n  }\r\n});\r\n// 3.2.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3250</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3260</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>refClass4</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement3410</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3400</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3420</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>refClass5</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement3109</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3110</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\n// make \'Objektartenkatalog\' mandatory on input \'Inhalte der Datensammlung/Datenbank\'\r\nfunction uiElement3110InputHandler() {\r\n  if (UtilGrid.getTableData(\"ref5dbContent\").length !== 0) {\r\n    UtilUI.setMandatory(\"uiElement3109\");\r\n  } else {\r\n    UtilUI.setOptional(\"uiElement3109\");\r\n  }\r\n}\r\ndojo.connect(UtilGrid.getTable(\"ref5dbContent\"), \"onDataChanged\", uiElement3110InputHandler);\r\n// 3.2.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3100</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3120</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>refClass6</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement3620</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3630</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3600</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3640</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3645</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3650</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3670</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[UtilGrid.getTable(\"ref6UrlList\").validate = applyRef6UrlListValidation;\r\ndojo.connect(UtilGrid.getTable(\"ref6UrlList\"), \"onCellChange\", addServiceUrlValidation);\r\ndojo.connect(UtilGrid.getTable(\"ref6UrlList\"), \"onAddNewRow\", addServiceUrlValidation);]]></scriptedProperties>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>spatialRef</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElementN006</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.connect(UtilGrid.getTable(\"spatialRefAdminUnit\"), \"onDataChanged\", applyRule5);\r\n\r\ndojo.subscribe(\"/onBeforeObjectPublish\", function(/*Array*/notPublishableIDs) {\r\n    spatialRefAdminUnitPublishable(notPublishableIDs);\r\n});]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN007</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN008</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.connect(UtilGrid.getTable(\"spatialRefLocation\"), \"onDataChanged\", applyRule5);\r\n// initialize\r\napplyRule5();\r\ndojo.connect(UtilGrid.getTable(\"spatialRefLocation\"), \"onCellChange\", minMaxBoundingBoxValidation);\r\nUtilGrid.getTable(\"spatialRefLocation\").validate = spatialRefLocationValidation;]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN009</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3500</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN010</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.connect(dijit.byId(\"spatialRefAltMin\"), \"onChange\", function(val) {applyRule6();});\r\ndojo.connect(dijit.byId(\"spatialRefAltMax\"), \"onChange\", function(val) {applyRule6();});\r\ndojo.connect(dijit.byId(\"spatialRefAltMeasure\"), \"onChange\", function(val) {applyRule6();});\r\ndojo.connect(dijit.byId(\"spatialRefAltVDate\"), \"onChange\", function(val) {applyRule6();});\r\napplyRule6();\r\n\r\naddMinMaxValidation(\"spatialRefAltMin\", \"spatialRefAltMax\", \"Minimum\", \"Maximum\");]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1140</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>timeRef</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement5030</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.subscribe(\"/onBeforeObjectPublish\", function(/*Array*/notPublishableIDs) {\r\n    timeRefTablePublishable(notPublishableIDs);\r\n});]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1250</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN011</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.connect(dijit.byId(\"timeRefType\"), \"onChange\", function(value) {applyRule3(value);});\r\n// initialize\r\napplyRule3(\"\");]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1220</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1240</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1230</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[applyTimeRefIntervalValidation();]]></scriptedProperties>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>extraInfo</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElement5041</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5042</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\ndojo.subscribe(\"/onObjectClassChange\", function(c) {\r\nif (c.objClass == \"Class3\") {\r\n  // hide in \'Geodatendienst\'\r\n  UtilUI.setHide(\"uiElement5042\");\r\n} else if (c.objClass == \"Class0\" || c.objClass == \"Class4\" || c.objClass == \"Class6\") {\r\n  // optional in classes \'Organisationenseinheit\' + \'Vorhaben\' + \'Informationssystem\'\r\n  UtilUI.setOptional(\"uiElement5042\");\r\n} else {\r\n  UtilUI.setMandatory(\"uiElement5042\");\r\n}});\r\n// 3.2.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement3571</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5043</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>hide</isVisible>\r\n        <scriptedProperties><![CDATA[\r\n// START 3.2.0 update\r\ndojo.subscribe(\"/onObjectClassChange\", function(c) {\r\n// only in \'Geo-Information/Karte\', then optional\r\nif (c.objClass == \"Class1\") {\r\n  UtilUI.setOptional(\"uiElement5043\");\r\n} else {\r\n  UtilUI.setHide(\"uiElement5043\");\r\n}});\r\n// 3.2.0 END\r\n]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN024</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.subscribe(\"/onBeforeObjectPublish\", function(/*Array*/notPublishableIDs) {\r\n    extraInfoConformityPublishable(notPublishableIDs);\r\n});]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN012</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1350</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN013</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5040</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>availability</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElementN025</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties><![CDATA[dojo.subscribe(\"/onBeforeObjectPublish\", function(/*Array*/notPublishableIDs) {\r\n    availabilityAccessPublishable(notPublishableIDs);\r\n});]]></scriptedProperties>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN027</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN026</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1315</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1320</id>\r\n        <isMandatory>true</isMandatory>\r\n        <isVisible>show</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement1310</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElement5052</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n  <layoutRubric isLegacy=\"true\">\r\n    <id>links</id>\r\n    <controls>\r\n      <legacyControl>\r\n        <id>uiElementN017</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>optional</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n      <legacyControl>\r\n        <id>uiElementN018</id>\r\n        <isMandatory>false</isMandatory>\r\n        <isVisible>alwaysHidden</isVisible>\r\n        <scriptedProperties/>\r\n      </legacyControl>\r\n    </controls>\r\n  </layoutRubric>\r\n</profile>\r\n');
/*!40000 ALTER TABLE `sys_generic_key` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2016-10-27 20:17:19
