<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de">
<head>
<style>
span.subtreeImport div.dojoButton {
	margin-bottom:32px;
}

span.universalImport div.dojoButton {
	margin-bottom:115px;
}
</style>
<script type="text/javascript">
var scriptScope = this;

_container_.addOnLoad(function() {
	document.getElementById("importType1").onclick = selectImportType;
	document.getElementById("importType2").onclick = selectImportType;
    selectImportType();
});

function selectImportType(e) {
	// if (!e) var e = window.event
	if (this.id == "importType2") {
		document.getElementById("importTree").style.display = "none";
//		document.getElementById("importUniversal").style.visibility = "visible";
//		document.getElementById("importUniversal").style.display = "block";
		document.getElementById("importType1").checked = false;
		document.getElementById("importProcessInfo").style.top = 667 + "px";
		
		document.getElementById("analyzeBtn").style.display = "";

    } else if (this.id == "importType1") {
		document.getElementById("importTree").style.visibility = "visible";
		document.getElementById("importTree").style.display = "block";
		document.getElementById("importUniversal").style.display = "none";
		document.getElementById("importType2").checked = false;
		document.getElementById("importProcessInfo").style.top = 667 + "px";
		
		document.getElementById("analyzeBtn").style.display = "none";

    } else {
		document.getElementById("importTree").style.visibility = "hidden";
		document.getElementById("importUniversal").style.visibility = "hidden";
		document.getElementById("importProcessInfo").style.top = 167 + "px";
		
		document.getElementById("analyzeBtn").style.display = "none";
	}
}

scriptScope.analyseFile = function() {
	// TODO Implement
	document.getElementById("importUniversal").style.visibility = "visible";
	document.getElementById("importUniversal").style.display = "block";
}

scriptScope.startImport = function() {
	// TODO Implement
	dojo.debug("uploadFile called.");
	var file = dwr.util.getValue("importFile");

	dojo.debug("File: "+file);

	ImportService.uploadFile(file, function(data) {
		dwr.engine.openInDownload(data);
	});
}

</script>
</head>

<body>

	<!-- CONTENT START -->
	<div dojoType="ContentPane" layoutAlign="client">

		<div id="contentSection" class="contentBlockWhite top">
			<div id="winNavi">
				<a href="#" title="Hilfe">[?]</a>
			</div>
			<div id="import" class="content">

				<!-- LEFT HAND SIDE CONTENT START -->
				<div class="spacer"></div>
				<div class="spacer"></div>
				<div class="inputContainer field grey w939">
					<div class="inputContainer">
						<span class="label"><label for="importFile" onclick="javascript:dialog.showContextHelp(arguments[0], 'Import-Datei')">Import-Datei</label></span>
						<span>
							<input type="file" id="importFile" size="80" />
						</span>
					</div>
					<div class="checkboxContainer">
						<span class="input"><input type="radio" name="importType" id="importType1" class="radio"/><label class="noRightMargin" for="importType1" onclick="javascript:dialog.showContextHelp(arguments[0], 'Teilbaum')">Teilbaum</label></span>
					</div>
					<div class="checkboxContainer noSpaceBelow">
						<span class="input"><input type="radio" name="importType" id="importType2" class="radio"/><label class="noRightMargin" for="importType2" onclick="javascript:dialog.showContextHelp(arguments[0], 'Universeller Import')">Universeller Import</label></span>
					</div>
				</div>

				<div class="inputContainer" style="display:none;" id="analyzeBtn">
					<span class="button w915" style="height:20px !important;">
						<span style="float:right;">
							<button dojoType="ingrid:Button" title="Analysieren" onClick="javascript:scriptScope.analyseFile();">Analysieren</button>
						</span>
					</span>
		            <div class="fill"></div>
				</div>

        <!-- IMPORT TEILBAUM START -->
        <!-- SPLIT CONTAINER START -->
        <div id="importTree">
          <span class="label"><label>Teilbaumimport</label></span>
          <div dojoType="SplitContainer" id="importTreeContainer" orientation="horizontal" sizerWidth="15" layoutAlign="client" templateCssPath="js/dojo/widget/templates/SplitContainer.css">
            <div dojoType="ContentPane" class="inputContainer noSpaceBelow" style="overflow:auto;" sizeShare="22.5">
              <!-- LEFT HAND SIDE CONTENT IMPORT TEILBAUM START -->
              <div class="inputContainer grey noSpaceBelow">
              	<div dojoType="ContentPane" id="treeImportTree">
                  <!-- tree components -->
                  <div dojoType="ingrid:TreeController" widgetId="treeControllerObjects" RpcUrl="server/treelistener.php"></div>
                  <div dojoType="ingrid:TreeListener" widgetId="treeListenerObjects"></div>	
                  <div dojoType="ingrid:TreeDocIcons" widgetId="treeDocIconsObjects"></div>	
                  <div dojoType="ingrid:TreeDecorator" listener="treeListenerObjects"></div>
                  
                  <!-- tree -->
                  <div dojoType="ingrid:Tree" listeners="treeControllerObjects;treeListenerObjects;treeDocIconsObjects" widgetId="tree">
                  	<div dojoType="ingrid:TreeNode" title="Objekte" objectId="o1" isFolder="true" nodeDocType="Objects" nodeAppType="Objekt"></div>
                  	<div dojoType="ingrid:TreeNode" title="Adressen" objectId="a1" isFolder="true" nodeDocType="Addresses" nodeAppType="Adresse"></div>
                  </div>
                  <div class="spacer"></div>
                </div>
              </div>
            </div>
            <!-- LEFT HAND SIDE CONTENT IMPORT TEILBAUM END -->

            <!-- RIGHT HAND SIDE CONTENT IMPORT TEILBAUM START -->
            <div dojoType="ContentPane" class="inputContainer noSpaceBelow" style="overflow:hidden;" sizeshare="77.5">

				<span class="entry">
					<span class="buttonCol subtreeImport" style="margin-top:39px;">
						<button dojoType="ingrid:Button" onClick="javascript:scriptScope.selectParentObjectForSubtreeImport();">&nbsp;>&nbsp;</button>
						<button dojoType="ingrid:Button" onClick="javascript:scriptScope.selectInfoAddressForSubtreeImport();">&nbsp;>&nbsp;</button>
					</span>
				</span>

              <div id="importTreeData" class="entry field">
                <span class="label"><label for="importTreeParentObject" onclick="javascript:dialog.showContextHelp(arguments[0], 'Ausgew&auml;hlter &uuml;bergeordneter Datensatz')">Ausgew&auml;hltes &uuml;bergeordnetes Objekt</label></span>
                <span class="input spaceBelow"><input type="text" id="importTreeParentObject" name="importTreeParentObject" class="w628" disabled="true" dojoType="ingrid:ValidationTextBox" value="WABIS - Altablagerungen" /></span>
                <span class="label"><label for="importTreeAddress" onclick="javascript:dialog.showContextHelp(arguments[0], 'Ausgew&auml;hlte Auskunftsadresse (f&uuml;r Objekte)')">Ausgew&auml;hlte Auskunftsadresse</label></span>
                <span class="input"><input type="text" id="importTreeAddress" name="importTreeAddress" class="w628" disabled="true" dojoType="ingrid:ValidationTextBox" value="Behmann, J&ouml;rg" /></span>
            	</div>
            </div>
          </div>
          <!-- RIGHT HAND SIDE CONTENT IMPORT TEILBAUM END -->

			<div class="inputContainer">
				<span class="button w915" style="height:20px !important;">
					<span style="float:right;">
						<button dojoType="ingrid:Button" title="Import starten" onClick="javascript:scriptScope.startImport();">Import starten</button>
					</span>
					<span style="float:right;">
						<button dojoType="ingrid:Button" title="Zuordnung zur&uuml;cksetzen" onClick="javascript:scriptScope.resetImport();">Zur&uuml;cksetzen</button>
					</span>
				</span>
	            <div class="fill"></div>
			</div>
         </div>
        <!-- IMPORT TEILBAUM END -->

        <!-- IMPORT UNIVERSELL START -->
        <!-- SPLIT CONTAINER START -->
        <div id="importUniversal">
          <span class="label"><label>Universeller Import</label></span>
          <div dojoType="SplitContainer" id="importUniversalContainer" orientation="horizontal" sizerWidth="15" layoutAlign="client" templateCssPath="js/dojo/widget/templates/SplitContainer.css">
            <div dojoType="ContentPane" class="inputContainer noSpaceBelow" style="overflow:auto;" sizeShare="22.5">
              <!-- LEFT HAND SIDE CONTENT IMPORT TEILBAUM START -->
              <div class="inputContainer grey noSpaceBelow">
              	<div dojoType="ContentPane" id="treeImportUniversal">
                  <!-- tree components -->
                  <div dojoType="ingrid:TreeController" widgetId="u_treeControllerObjects" RpcUrl="server/treelistener.php"></div>
                  <div dojoType="ingrid:TreeListener" widgetId="u_treeListenerObjects"></div>	
                  <div dojoType="ingrid:TreeDocIcons" widgetId="u_treeDocIconsObjects"></div>	
                  <div dojoType="ingrid:TreeDecorator" listener="u_treeListenerObjects"></div>
                  
                  <!-- tree -->
                  <div dojoType="ingrid:Tree" listeners="u_treeControllerObjects;u_treeListenerObjects;u_treeDocIconsObjects" widgetId="u_tree">
                  	<div dojoType="ingrid:TreeNode" title="Objekte" objectId="o1" isFolder="true" nodeDocType="Objects" nodeAppType="Objekt"></div>
                  	<div dojoType="ingrid:TreeNode" title="Adressen" objectId="a1" isFolder="true" nodeDocType="Addresses" nodeAppType="Adresse"></div>
                  </div>
                  <div class="spacer"></div>
                </div>
              </div>
            </div>
            <!-- LEFT HAND SIDE CONTENT IMPORT UNIVERSAL END -->

            <!-- RIGHT HAND SIDE CONTENT IMPORT UNIVERSAL START -->
            <div dojoType="ContentPane" class="inputContainer noSpaceBelow" style="overflow:hidden;" sizeShare="77.5">

				<span class="entry">
					<span class="buttonCol universalImport" style="margin-top:60px;">
						<button dojoType="ingrid:Button" onClick="javascript:scriptScope.selectParentObjectForUniversalImport();">&nbsp;>&nbsp;</button>
						<button dojoType="ingrid:Button" onClick="javascript:scriptScope.selectInfoAddressForUniversalImport();">&nbsp;>&nbsp;</button>
						<button dojoType="ingrid:Button" onClick="javascript:scriptScope.selectParentAddressForUniversalImport();">&nbsp;>&nbsp;</button>
					</span>
				</span>

              <div id="importUniversalData" class="entry field">
                <div class="inputContainer h130">
                  <span class="label"><label for="importUniversalParent" onclick="javascript:dialog.showContextHelp(arguments[0], 'Elternobjekt festlegen')">Elternobjekt festlegen</label></span>
                  <div class="tableContainer rows4 fullInside">
              	    <table id="importUniversalParent" dojoType="ingrid:FilteringTable" minRows="4" multiple="true" headClass="fixedHeader" cellspacing="0" class="filteringTable interactive readonly relativePos">
              	      <thead>
              		      <tr>
                    			<th field="importObjType" dataType="String" width="30">&nbsp;</th>
                    			<th field="importObj" dataType="String" width="288">Objekt aus Import</th>
                    			<th field="assignedObjType" dataType="String" width="30">&nbsp;</th>
                    			<th field="assignedObj" dataType="String" width="288">Zugeordnetes Objekt</th>
              		      </tr>
              	      </thead>
              	      <tbody>
              	      </tbody>
              	    </table>
                  </div>
                </div>
    
                <div class="inputContainer h130">
                  <span class="label"><label for="importUniversalInfoAddress" onclick="javascript:dialog.showContextHelp(arguments[0], 'Auskunfts-Adresse festlegen')">Auskunfts-Adresse festlegen</label></span>
                  <div class="tableContainer rows4 fullInside">
              	    <table id="importUniversalInfoAddress" dojoType="ingrid:FilteringTable" minRows="4" multiple="true" headClass="fixedHeader" cellspacing="0" class="filteringTable interactive readonly relativePos">
              	      <thead>
              		      <tr>
                    			<th field="importObjType" dataType="String" width="30">&nbsp;</th>
                    			<th field="importObj" dataType="String" width="288">Adresse aus Import</th>
                    			<th field="assignedObjType" dataType="String" width="30">&nbsp;</th>
                    			<th field="assignedObj" dataType="String" width="288">Zugeordnete Adresse</th>
              		      </tr>
              	      </thead>
              	      <tbody>
              	      </tbody>
              	    </table>
                  </div>
                </div>      
   
                <div class="inputContainer h130">
                  <span class="label"><label for="importUniversalInfoParentAddress" onclick="javascript:dialog.showContextHelp(arguments[0], 'Elternadresse festlegen')">Elternadresse festlegen</label></span>
                  <div class="tableContainer rows4 fullInside">
              	    <table id="importUniversalInfoParentAddress" dojoType="ingrid:FilteringTable" minRows="4" multiple="true" headClass="fixedHeader" cellspacing="0" class="filteringTable interactive readonly relativePos">
              	      <thead>
              		      <tr>
                    			<th field="importObjType" dataType="String" width="30">&nbsp;</th>
                    			<th field="importObj" dataType="String" width="288">Adresse aus Import</th>
                    			<th field="assignedObjType" dataType="String" width="30">&nbsp;</th>
                    			<th field="assignedObj" dataType="String" width="288">Zugeordnete Adresse</th>
              		      </tr>
              	      </thead>
              	      <tbody>
              	      </tbody>
              	    </table>
                  </div>
      
                </div>
              </div>
            </div>
          </div>
          <!-- RIGHT HAND SIDE CONTENT IMPORT UNIVERSAL END -->

          <div id="importUniversalButtons" class="inputContainer">
            <span class="button w915"><a href="#" class="buttonBlue" title="Zuordnung zur&uuml;cksetzen">Zur&uuml;cksetzen</a><a href="#" class="buttonBlue" title="Import starten">Import starten</a></span>
      	  </div>
        </div>
        <!-- IMPORT UNIVERSAL END -->

        <div id="importProcessInfo" class="inputContainer noSpaceBelow">
          <div class="infobox w941">
            <span class="icon"><img src="img/ic_info_download.gif" width="16" height="16" alt="Info" /></span>
            <span class="title"><a href="javascript:toggleInfo('importProcessInfo');" title="Info aufklappen">Informationen zum letzten Prozess:
              <img src="img/ic_info_deflate.gif" width="8" height="8" alt="Pfeil" /></a></span>
            <div id="importProcessInfoContent">
              <p>Die <a href="#" title="Logdatei">[Logdatei]</a> des Imports steht Ihnen zur Verf&uuml;gung.</p>
              <table cellspacing="0">
                <tr>
                  <td>Gestartet am:</td>
                  <td>13.2.2007, 00:02 Uhr</td></tr>
                  <td>Beendet am:</td>
                  <td>13.2.2007, 19:32 Uhr</td></tr>
                  <td>Anzahl Objekte:</td>
                  <td>132110</td></tr>
                  <td>Anzahl Adressen:</td>
                  <td>10</td></tr>
              </table>
<!--              <span class="button"><a href="#" class="buttonBlue" title="Prozess abbrechen">Prozess abbrechen</a></span>-->
        	  </div>
          </div>
        </div>
        
      </div>
    </div>
  </div>
  <!-- CONTENT END -->

</body>
</html>
