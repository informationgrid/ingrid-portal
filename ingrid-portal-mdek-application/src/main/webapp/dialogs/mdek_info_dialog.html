<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="author" content="wemove digital solutions" />
<meta name="copyright" content="wemove digital solutions GmbH" />

<script src='/ingrid-portal-mdek-application/dwr/interface/VersionInformation.js'></script>
<script src='/ingrid-portal-mdek-application/dwr/interface/BackendService.js'></script>

<script type="text/javascript">
dojo.connect(_container_, "onLoad", function() {
    VersionInformation.get({
        callback: function(res) { setVersionInformation(res); },
        errorHandler: function(message) { console.debug("Error: " + message); }
    });

    BackendService.getBackendVersion({
        callback: function(res) { setBackendVersionInformation(res); },
        errorHandler: function(message) { console.debug("Error: " + message); }
    });
});

function setVersionInformation(ver) {
    var infoDiv = dojo.byId("versionInfo");
    var displayText = "";

    displayText += "Build name: "+ver.name+"<br>";
    displayText += "Build version: "+ver.version+"<br>";
    displayText += "Build number: "+ver.buildNumber+"<br>";
    displayText += "Build timestamp: "+dojo.date.locale.format(ver.timeStamp, {formatLength:"short", datePattern:"dd.MM.yyyy", timePattern:"HH:mm"})+"<br>";

    infoDiv.innerHTML = displayText;
}

function setBackendVersionInformation(verList) {
    var infoDiv = dojo.byId("serverVersionInfo");
    var displayText = "";

    for (var i = 0; i < verList.length; ++i) {
        displayText += "Build name: "+verList[i].name+"<br>";
        displayText += "Build version: "+verList[i].version+"<br>";
        if (verList[i].buildNumber) {
            displayText += "Build number: "+verList[i].buildNumber+"<br>";
        }
        if (verList[i].timeStamp) {
            displayText += "Build timestamp: "+dojo.date.locale.format(verList[i].timeStamp, {formatLength:"short", datePattern:"dd.MM.yyyy", timePattern:"HH:mm"})+"<br>";
        }
        displayText += "<br>";
    }

    infoDiv.innerHTML = dojo.trim(displayText);
}

</script>
</head>

<body>
    <div id="versionInfo">
    </div>
    <br>
    <div id="serverVersionInfo">
    </div>
</body>