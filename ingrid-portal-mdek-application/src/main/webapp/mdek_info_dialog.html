<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de">
<head>
<title>Verweise anlegen/bearbeiten</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="author" content="wemove digital solutions" />
<meta name="copyright" content="wemove digital solutions GmbH" />

<script type="text/javascript">
_container_.addOnLoad(function() {
	VersionInformation.get({
		callback: function(res) { setVersionInformation(res); },
		errorHandler: function(message) { dojo.debug("Error: " + message); }
	});

	BackendService.getBackendVersion({
		callback: function(res) { setBackendVersionInformation(res); },
		errorHandler: function(message) { dojo.debug("Error: " + message); }
	});
});

function setVersionInformation(ver) {
	var infoDiv = dojo.byId("versionInfo");
	var displayText = "";

	displayText += "Build name: "+ver.name+"<br>";
	displayText += "Build version: "+ver.version+"<br>";
	displayText += "Build number: "+ver.buildNumber+"<br>";
	displayText += "Build timestamp: "+dojo.date.format(ver.timeStamp, {formatLength:"short", datePattern:"dd.MM.yyyy", timePattern:"HH:mm"})+"<br>";

	infoDiv.innerHTML = displayText;
}

function setBackendVersionInformation(verList) {
	var infoDiv = dojo.byId("serverVersionInfo");
	var displayText = "";

	for (var i = 0; i < verList.length; ++i) {
/*
		if (verList[i].name && verList[i].name.indexOf("ingrid-mdek-api") != -1) {
			// Only display api revision for now
			displayText += "Server Build name: "+verList[i].name+"<br>";
			displayText += "Server Build version: "+verList[i].version+"<br>";
			displayText += "Server Build number: "+verList[i].buildNumber+"<br>";
			displayText += "Server Build timestamp: "+dojo.date.format(verList[i].timeStamp, {formatLength:"short", datePattern:"dd.MM.yyyy", timePattern:"HH:mm"})+"<br>";
			displayText += "<br>";
		}
*/
		displayText += "Build name: "+verList[i].name+"<br>";
		displayText += "Build version: "+verList[i].version+"<br>";
		displayText += "Build number: "+verList[i].buildNumber+"<br>";
		displayText += "Build timestamp: "+dojo.date.format(verList[i].timeStamp, {formatLength:"short", datePattern:"dd.MM.yyyy", timePattern:"HH:mm"})+"<br>";
		displayText += "<br>";
	}

	infoDiv.innerHTML = dojo.string.trim(displayText);
}

</script>
</head>

<body>
	<div id="versionInfo">
	</div>
	<br>
	<div id="serverVersionInfo">
	</div>
</body>