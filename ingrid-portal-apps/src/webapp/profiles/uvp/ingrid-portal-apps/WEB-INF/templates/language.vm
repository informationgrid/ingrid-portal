#macro (getSelected $lang)
#if ($lang.equals($selectedLang))is-active#end
#end

#macro (getPressed $lang)
#if ($lang.equals($selectedLang)) aria-pressed="true" #else aria-pressed="false" #end
#end

#macro (getSelectedIcon)
#if ($lang.equals($selectedLang)) <svg class="icon"><use xlink:href="#tick"/></svg>#end
#end

#macro (getSelectedValue)
    #set($i = 0)
    #set($index = 0)
    #foreach($ls in $languagesShort)
        #if($ls.equals($selectedLang))
            #set($index=$i)
        #end
        #set($i=$i+1)
    #end
    $ListTool.get($languagesNames, $index)
#end

#set ($action = $renderResponse.createActionURL())
<div class="language-buttons">
    <form action="$action" method="get" name="LanguageForm" id="LanguageForm" style="display:inline; ">
    #set($i=0)
    #foreach($lang in $languagesShort)
        #if($selectedLang != $lang)
        <button onclick="submitform($(this), '$lang')" class="button round social lang #getSelected($lang)" #getPressed($lang) aria-label="$ListTool.get($languagesNames, $i)">$lang</button>
        #end
        #set($i=$i+1)
    #end
    </form>
    <button id="language-buttons" class="button round social lang" title="$MESSAGES.getString('common.language.title')">
        $selectedLang
    </button>
</div>
<script>
function submitform(anchor, lang) {
    var form = anchor.closest('form');
    form.append('<input type="hidden" name="lang" value="'+ lang + '"/>');
    form.submit();
}

  $('#language-buttons').click(function() {
    $('footer .footer-buttons-bar .language-buttons form button.lang').fadeToggle( "fast", "linear" ).css("display","inline-block");
  });

</script>