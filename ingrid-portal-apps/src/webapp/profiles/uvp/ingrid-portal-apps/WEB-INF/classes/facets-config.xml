<?xml version="1.0" encoding="UTF-8"?>
<!-- DOKUMENTATION

Diese Datei dient zur Konfiguration der Facettierung. Hier können weitere Facetten definiert werden oder auch entfernt werden. 
Standardmäßig sind hier die Facettierungseinstellungen von InGrid-Portal definiert.

Für die Facette (<facet>) sind folgende Tags Pflicht:
- <name>
- <id>

Eine Facette (<facet>), welches zur Auswahlt dient, müssen dazu einen Tag <query> bzw. <from>, <to> enthalten. 

Struktur:
*********
<facets>
    <facet> ***************************************** Neuer Facettierungsbaum (zum Ein-/Ausklappen)
        <name></name> ******************************* Facettierungsbaum-Name (lokalisiert per Portal-Resource-Key oder nicht lokalisiert als reiner Text)
        <id></id> *********************************** Facettierungsbaum-ID (dieser muss eindeutig sein und darf bei weiteren Facetten nicht existieren)
        <isOpen></isOpen>**************************** Facettierungsbaum wird bei true aufgeklappt dargestellt (default: false)
        
        <facets> ************************************ Facettierungsbaum-Kinder (zur Auswahl)
            <facet> ********************************* Neuer Facettierungs-Kind (kann die Eigenschaft "sort" enthalten, siehe unten)
                <name></name> *********************** Neuer Facettierungs-Kind-Name
                <id></id> *************************** Neuer Facettierungs-Kind-ID 
                <query></query> ********************* Neuer Facettierungs-Kind-Abfrage
                 
                <facets> **************************** Facettierungsbaum-Enkeln (zur Auswahl und kann die Eigenschaft "queryType" enthalten, siehe unten)
                    <facet> ************************* Facettierungsbaum-Enkel
                        <name></name> *************** Facettierungsbaum-Enkel-Name
                        <query></query> ************* Facettierungsbaum-Enkel-Abfrage
                        <id></id> ******************* Facettierungsbaum-Enkel-ID
                    </facet>
                    ...
                </facets>
            </facet>
            ...
        </facets>
    </facet>
    ...
</facets>

Weitere Facetten-Tags/Eigenschaften:
****************
<dependency>"ID"</dependency>:
 - Diese Facetten-Tag dient dazu eine Abhängigkeit zu beschreiben, d.h. wird die existierende definierte Facetten-ID ausgewählt, so wird diese Facette sichtbar. (siehe Facette "Akualität") 
  
<hidden>"ID"</hidden>:
 - Dieser Facetten-Tag dient dazu eine Facette verschwinden zu lassen, sobald die existierende definierte Facetten-ID ausgewählt wird. (siehe Facette "Raumbezug")  

<facets queryType="">:
 - UND Abfrage: (Einfachauswahl)
         Standardmäßig sind alle definierten Query-Abfragen eine UND-Abfrage.
 - ODER Abfrage: (Mehrfachauswahl) 
        Bei der ODER-Abfrage bestehen zwei Möglichkeiten Unterfacetten (<facet>) einer Facette (<facets>) darzustellen:
        1. ODER-Abfrage mit reinen Checkboxen - "OR"
        2. ODER-Abfrage mit Erweiterung in einem Dialog-Fenster, d.h. standardmäßig erscheinen drei der definierten Facetten (<facet>) 

<facet sort="">:
Für die Sortierung der Unterfacetten eine Facette existieren vier Möglichkeiten:
 - Absteigend nach Facettenwert - "SORT_BY_VALUE_DESC"
 - Aufsteigend nach Facettenwert - "SORT_BY_VALUE_ASC"
 - Alphabetisch nach Facettenname - "SORT_BY_NAME"
 - keine Sortierung

Spezielle Facetten:
*************************
Themen:
Bei Betätigung der Themen-Facette (<id>topic</id>) wird diese mit Unterthemen erweitert, welches als ODER-Abfrage (Mehrauswahl) ausgewählt werden können.
Die Unterthemen werden aus der Datenbank des Portals gelesen und sind hier in der Konfiguration nicht definiert.
 
Aktualität:
Die Facette Aktualität enthält keine <query>-Tag, wie üblich, sondern hier wird die Query aus den Tags <from> sowie <to> erstellt, deren Inhalt eine Zeit-Periode beschreibt.
Die Notation (entspricht dem Format ISO 8601) für die Zeit-Periode ist folgendermaßen: (vom aktuellen Datum aus)

 - P -> Bezeichnet, das nachfolgende Zeichen die Dauer einer Periode repräsentieren
 - Y -> Positive Zahl, Anzahl von Jahren
 - M -> Positive Zahl, Anzahl von Monaten
 - D -> Positive Zahl, Anzahl von Tage
 - T -> Bezeichnet, das nachfolgende Zeichen die Dauer einer Periode repräsentieren
 - H -> Positive Zahl, Anzahl von Stunden
 - M -> Positive Zahl, Anzahl von Minuten
 - S -> Positive Zahl, Anzahl von Sekunden
Beispiel: Eine Dauer von 5 Tagen, 4 Stunden und 30,7 Minuten hat folgenden Notation: P5DT4H30.7M
 
Anbieter: (Analog zu Themen)
Die Facette Anbieter (<id>provider</id>) wird aus der Portal-Datenbank generiert. Dabei werden die Partner als UND-Abfrage (Einfachauswahl), man kann nur einen Partner auswählen, 
und deren Anbieter als ODER-Abfrage (Mehrauswahl), man kann mehrere Anbieter gleichzeitig auswählen, durchgeführt.

Raumbezug:
Die Facette Raumbezug (<id>area</id>) ist eine spezielle Facette. Hier werden keine Facetten gesendet, sondern nur Abfragen ausgeführt.
- Raumbezug-Abfrage aus der Karte
- Raumbezug-Abfrage aus dem Geothesaurus

Raumbezug Adressen:
Die Facette Raumbezug Addressen (<id>area.address</id>) ist eine spezielle Facette. Hier werden keine Facetten gesendet, sondern nur Abfragen ausgeführt.
- Adressen-Raumbezugsabfrage anhand der Eingabe von Straße, Postleitzahl und/oder Ort.

Attribute:
Die Facette Attribute (<id>Attribute</id>) ist eine spezielle Facette. Hier werden keine Facetten gesendet, sondern nur Abfragen ausgeführt.
- Forschungsprojekte-Attributenabfrage anhand der Eingabe von Projektname, Institution, Projektleiter, Beteiligte, Projektträger und/oder Laufzeit.


Facetten-Klassen (Nicht-indexbasierte iPlugs)
****************
Wird eine Facette (<facet>) erstellt, deren Query (<query>) ein Nicht-indexbasiertes iPlug (z.B. Opensearch-iPlug) abfragt, so muss diese Facette zunächst im iPlug definiert werden.
Um eine Definition in solch einen iPlug durchzuführen, fügt man der Datei "springapp-servlet.xml" (unter "<IPLUG_INSTALLATION>/webapp/WEB-INF") folgenden Eintrag hinzu:

...
<bean id="plugDescriptionFacetCounter"
       class="de.ingrid.search.utils.facet.counter.DscPlugdescriptionFacetCounter">
       <property name="plugDescriptionWrapper">
           <ref bean="plugDescriptionWrapper" />
       </property>
       <property name="facetClassDefinitions">
           <list>
                   ...
                   <value>test3:test23</value>         // Siehe Beispiel: "Test UND-Abfrage"
                   ...
           </list>
    </property>
</bean>
....

Unter "property" (property>) mit dem Namen "facetClassDefinitions" erweitert man die Liste (<list>) mit dem Wert (<value>):  
<value>"FACET-PARENT-ID":"FACET-ID"</value>

Dadurch wird von dem iPlug eine Facetten-Klasse mit der Notation "FACET-PARENT-ID":"FACET-ID" zurückgeliefert. 



Beispiele:
**********
Am Ende der Datei sind Test-Beispiel für UND- sowie ODER-Abfragen (ohne/mit Dialog)
 -->
 
<facets>
    <!-- Kategorien -->
    <facet>
        <name>Kategorien</name>
        <id>type</id>
        <facets>
        <!-- Wärmeerzeugung, Bergbau und Energie -->
            <facet>
                <name>Wärmeerzeugung\, Bergbau und Energie</name>
                <query>baseCategory:"UVP-1"</query>
                <id>energie</id>
            </facet>
        <!-- Steine und Erden, Glas, Keramik, Baustoffe -->
            <facet>
                <name>Steine und Erden\, Glas\, Keramik\, Baustoffe</name>
                <query>baseCategory:"UVP-2"</query>
                <id>baustoffe</id>
            </facet>
        <!-- Stahl, Eisen und sonstige Metalle einschließlich Verarbeitung -->
            <facet>
                <name>Stahl\, Eisen und sonstige Metalle einschließlich Verarbeitung</name>
                <query>baseCategory:"UVP-3"</query>
                <id>verarbeitung</id>
            </facet>
        <!-- Chemische Erzeugnisse, Arzneimittel, Mineralölraffination und Weiterverarbeitung -->
            <facet>
                <name>Chemische Erzeugnisse\, Arzneimittel\, Mineralölraffination und Weiterverarbeitung</name>
                <query>baseCategory:"UVP-4"</query>
                <id>chemie</id>
            </facet>
       <!-- Oberflächenbehandlung von Kunststoffen -->
            <facet>
                <name>Oberflächenbehandlung von Kunststoffen</name>
                <query>baseCategory:"UVP-5"</query>
                <id>kunststoff</id>
            </facet>
        <!-- Holz, Zellstoff -->
            <facet>
                <name>Holz\, Zellstoff</name>
                <query>baseCategory:"UVP-6"</query>
                <id>holzzellstoff</id>
            </facet>
        <!-- Nahrungs-, Genuss- und Futtermittel, landwirtschaftliche Erzeugnisse -->
            <facet>
                <name>Nahrungs-\, Genuss- und Futtermittel\, landwirtschaftliche Erzeugnisse</name>
                <query>baseCategory:"UVP-7"</query>
                <id>erzeugnisse</id>
            </facet>
        <!-- Verwertung und Beseitigung von Abfällen und sonstigen Stoffen -->
            <facet>
                <name>Verwertung und Beseitigung von Abfällen und sonstigen Stoffen</name>
                <query>baseCategory:"UVP-8"</query>
                <id>verwertungbeseitigungabfaellen</id>
            </facet>
        <!-- Lagerung von Stoffen und Gemischen -->
            <facet>
                <name>Lagerung von Stoffen und Gemischen</name>
                <query>baseCategory:"UVP-9"</query>
                <id>lagerungstoffengemischen</id>
            </facet>
        <!-- Sonstige Industrieanlagen -->
            <facet>
                <name>Sonstige Industrieanlagen</name>
                <query>baseCategory:"UVP-10"</query>
                <id>industrieanlagen</id>
            </facet>
        <!-- Kernenergie -->
            <facet>
                <name>Kernenergie</name>
                <query>baseCategory:"UVP-11"</query>
                <id>kernenergie</id>
            </facet>
        <!-- Abfalldeponien -->
            <facet>
                <name>Abfalldeponien</name>
                <query>baseCategory:"UVP-12"</query>
                <id>abfalldeponien</id>
            </facet>
        <!-- Wasserwirtschafltiche Vorhaben mit Benutzung oder Ausbau eines Gewässers -->
            <facet>
                <name>Wasserwirtschaftliche Vorhaben </name>
                <query>baseCategory:"UVP-3"</query>
                <id>wasservorhaben</id>
            </facet>
        <!-- Verkehrsvorhaben -->
            <facet>
                <name>Verkehrsvorhaben</name>
                <query>baseCategory:"UVP-14"</query>
                <id>verkehrsvorhaben</id>
            </facet>
        <!-- Bergbau und dauerhafte Speicherung von Kohlendioxid -->
            <facet>
                <name>Bergbau- und Abbauvorhaben, dauerhafte Speicherung von Kohlendioxid</name>
                <query>baseCategory:"UVP-15"</query>
                <id>bergbaukohlendioxid</id>
            </facet>
        <!-- Flurbereinigung -->
            <facet>
                <name>Flurbereinigung</name>
                <query>baseCategory:"UVP-16"</query>
                <id>flurbereinigung</id>
            </facet>
        <!-- Forstliche und landwirtschaftliche Vorhaben -->
            <facet>
                <name>Forstliche und landwirtschaftliche Vorhaben</name>
                <query>baseCategory:"UVP-17"</query>
                <id>forstlandvorhaben</id>
            </facet>
        <!-- Bauvorhaben -->
            <facet>
                <name>Bauvorhaben, Fremdenverkehr, Freizeit, ohne Bebauungsplan</name>
                <query>baseCategory:"UVP-18"</query>
                <id>bauvorhaben</id>
            </facet>
        <!-- Leitungsanlagen und andere Anlagen -->
            <facet>
                <name>Leitungsanlagen und vergleichbare Anlagen</name>
                <query>baseCategory:"UVP-19"</query>
                <id>anlagen</id>
            </facet>
        </facets>
    </facet>
    <!-- Status -->
    <facet>
        <name>Verfahrens-Typ</name>
        <id>procedure</id>
        <facets>
        <!-- UVP Verfahren -->
            <facet>
                <name>UVP Verfahren</name>
                <query>t01_object.obj_class:10</query>
                <id>procedure_10</id>
            </facet>
        <!-- Vorprüfungen mit negativem Ergebnis -->
            <facet>
                <name>Vorprüfungen mit negativem Ergebnis</name>
                <query>t01_object.obj_class:12</query>
                <id>procedure_12</id>
            </facet>
        <!-- Ausländisches Verfahren -->
            <facet>
                <name>Ausländisches Verfahren</name>
                <query>t01_object.obj_class:11</query>
                <id>procedure_11</id>
            </facet>
        <!-- Raumordnungsverfahren -->
            <facet>
                <name>Raumordnungsverfahren</name>
                <query>t01_object.obj_class:13</query>
                <id>procedure_13</id>
            </facet>
            <!-- Linienbestimmung nach Bundesfernstraßengesetz oder Landesstraßenrecht -->
            <facet>
                <name>Linienbestimmung nach Bundesfernstraßengesetz oder Landesstraßenrecht</name>
                <query>t01_object.obj_class:14</query>
                <id>procedure_14</id>
            </facet>
        </facets>
    </facet>
    <facet>
        <name>searchResult.facete.title.time</name>
        <id>modtime</id>
        <facets>
            <!-- letzter Monat -->
            <facet>
                <name>searchResult.facete.time.1</name>
                <id>modtime1</id>
                <from>P1MT</from>
                <to>PT</to>
                <query>t01_object.mod_time:[{FROM}0* TO {TO}9*]</query>
            </facet>
            <!-- letzte 3 Monate -->
            <facet>
                <name>searchResult.facete.time.2</name>
                <id>modtime2</id>
                <from>P3MT</from>
                <to>P1M1DT</to>
                <query>t01_object.mod_time:[{FROM}0* TO {TO}9*]</query>
            </facet>
            <!-- letztes Jahr -->
            <facet>
                <name>searchResult.facete.time.3</name>
                <id>modtime3</id>
                <from>P1YT</from>
                <to>P3M1DT</to>
                <query>t01_object.mod_time:[{FROM}0* TO {TO}9*]</query>
            </facet>
            <!-- letzte 5 Jahre -->
            <facet>
                <name>searchResult.facete.time.4</name>
                <id>modtime4</id>
                <from>P5YT</from>
                <to>P1Y1DT</to>
                <query>t01_object.mod_time:[{FROM}0* TO {TO}9*]</query>
            </facet>
            <!-- Älter als 5 Jahre -->
            <facet>
                <name>searchResult.facete.time.5</name>
                <id>modtime5</id>
                <from></from>
                <to>P5Y1DT</to>
                <query>t01_object.mod_time:[{FROM}0* TO {TO}9*]</query>
            </facet>
        </facets>
    </facet>
    <!-- Raumbezug -->
    <!-- Standard - Kann nicht erweitert werden -->
    <facet>
        <name>searchResult.facete.title.area</name>
        <id>area</id>
    </facet>
        <!-- Kategorien -->
    <facet>
        <name>Kategorien</name>
        <id>category</id>
        <categoryOnly>true</categoryOnly>
        <facets>
        <!-- Wärmeerzeugung, Bergbau und Energie -->
            <facet>
                <name>Wärmeerzeugung\, Bergbau und Energie</name>
                <query>baseCategory:"UVP-1"</query>
                <id>energie</id>
            </facet>
        <!-- Steine und Erden, Glas, Keramik, Baustoffe -->
            <facet>
                <name>Steine und Erden\, Glas\, Keramik\, Baustoffe</name>
                <query>baseCategory:"UVP-2"</query>
                <id>baustoffe</id>
            </facet>
        <!-- Stahl, Eisen und sonstige Metalle einschließlich Verarbeitung -->
            <facet>
                <name>Stahl\, Eisen und sonstige Metalle einschließlich Verarbeitung</name>
                <query>baseCategory:"UVP-3"</query>
                <id>verarbeitung</id>
            </facet>
        <!-- Chemische Erzeugnisse, Arzneimittel, Mineralölraffination und Weiterverarbeitung -->
            <facet>
                <name>Chemische Erzeugnisse\, Arzneimittel\, Mineralölraffination und Weiterverarbeitung</name>
                <query>baseCategory:"UVP-4"</query>
                <id>chemie</id>
            </facet>
       <!-- Oberflächenbehandlung von Kunststoffen -->
            <facet>
                <name>Oberflächenbehandlung von Kunststoffen</name>
                <query>baseCategory:"UVP-5"</query>
                <id>kunststoff</id>
            </facet>
        <!-- Holz, Zellstoff -->
            <facet>
                <name>Holz\, Zellstoff</name>
                <query>baseCategory:"UVP-6"</query>
                <id>holzzellstoff</id>
            </facet>
        <!-- Nahrungs-, Genuss- und Futtermittel, landwirtschaftliche Erzeugnisse -->
            <facet>
                <name>Nahrungs-\, Genuss- und Futtermittel\, landwirtschaftliche Erzeugnisse</name>
                <query>baseCategory:"UVP-7"</query>
                <id>erzeugnisse</id>
            </facet>
        <!-- Verwertung und Beseitigung von Abfällen und sonstigen Stoffen -->
            <facet>
                <name>Verwertung und Beseitigung von Abfällen und sonstigen Stoffen</name>
                <query>baseCategory:"UVP-8"</query>
                <id>verwertungbeseitigungabfaellen</id>
            </facet>
        <!-- Lagerung von Stoffen und Gemischen -->
            <facet>
                <name>Lagerung von Stoffen und Gemischen</name>
                <query>baseCategory:"UVP-9"</query>
                <id>lagerungstoffengemischen</id>
            </facet>
        <!-- Sonstige Industrieanlagen -->
            <facet>
                <name>Sonstige Industrieanlagen</name>
                <query>baseCategory:"UVP-10"</query>
                <id>industrieanlagen</id>
            </facet>
        <!-- Kernenergie -->
            <facet>
                <name>Kernenergie</name>
                <query>baseCategory:"UVP-11"</query>
                <id>kernenergie</id>
            </facet>
        <!-- Abfalldeponien -->
            <facet>
                <name>Abfalldeponien</name>
                <query>baseCategory:"UVP-12"</query>
                <id>abfalldeponien</id>
            </facet>
        <!-- Wasserwirtschafltiche Vorhaben mit Benutzung oder Ausbau eines Gewässers -->
            <facet>
                <name>Wasserwirtschaftliche Vorhaben </name>
                <query>baseCategory:"UVP-3"</query>
                <id>wasservorhaben</id>
            </facet>
        <!-- Verkehrsvorhaben -->
            <facet>
                <name>Verkehrsvorhaben</name>
                <query>baseCategory:"UVP-14"</query>
                <id>verkehrsvorhaben</id>
            </facet>
        <!-- Bergbau und dauerhafte Speicherung von Kohlendioxid -->
            <facet>
                <name>Bergbau- und Abbauvorhaben, dauerhafte Speicherung von Kohlendioxid</name>
                <query>baseCategory:"UVP-15"</query>
                <id>bergbaukohlendioxid</id>
            </facet>
        <!-- Flurbereinigung -->
            <facet>
                <name>Flurbereinigung</name>
                <query>baseCategory:"UVP-16"</query>
                <id>flurbereinigung</id>
            </facet>
        <!-- Forstliche und landwirtschaftliche Vorhaben -->
            <facet>
                <name>Forstliche und landwirtschaftliche Vorhaben</name>
                <query>baseCategory:"UVP-17"</query>
                <id>forstlandvorhaben</id>
            </facet>
        <!-- Bauvorhaben -->
            <facet>
                <name>Bauvorhaben, Fremdenverkehr, Freizeit, ohne Bebauungsplan</name>
                <query>baseCategory:"UVP-18"</query>
                <id>bauvorhaben</id>
            </facet>
        <!-- Leitungsanlagen und andere Anlagen -->
            <facet>
                <name>Leitungsanlagen und vergleichbare Anlagen</name>
                <query>baseCategory:"UVP-19"</query>
                <id>anlagen</id>
            </facet>
        </facets>
    </facet>
</facets>
