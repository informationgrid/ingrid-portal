#parse ('/WEB-INF/templates/global/include_hit_image_error.vm')
#set($loadDefaultMapImage = "loadDefaultMapImage(this,&apos;${plugPartner}&apos;);")

#macro (renderTitleLine $entry)
    #if($tool.hasContent($entry.title))
        <strong>$entry.title</strong>
    #end
#end

#macro (renderSubNavigation $title $hash)
<a class="js-anchor-target-entry" href="#${hash}">
    <span class="text">$title</span>
</a>
#end

#macro (renderLinkLine $entry $hasImage $displayPreview)
    #if($entry.type == "html")
        $entry.body
    #else
        #if(!$entry.isMapLink && !$entry.isDownload)
            #if($hasImage)
            ##<div class="map">
            ##    <span class="ic-ic-external"></span>
            ##</div>
            #end
        #end
        #if(!$entry.hasLinkIcon)
            #if($entry.isExtern)
                <span class="ic-ic-external"></span>
            #elseif($entry.isMapLink)
                #if($entry.description)
                    #set($imgAlt = $entry.description)
                    #set($imgTitle = $entry.description)
                #elseif($entry.title)
                    #parse ('/WEB-INF/templates/detail/parts/search_detail_idf/search_detail_idf_part_img_title.vm')
                #else
                    #set($imgAlt = "")
                    #set($imgTitle = "")
                #end
                <div class="swiper-slide">
                    <p class="caption">
                        <a target="_blank" class="external-link" href="$entry.src" title="$imgTitle" rel="noopener noreferrer">
                            <img class="preview_image" #if($entry.src.indexOf("https") == -1) src="./" data-src="$entry.src" #else src="$entry.src" #end title="$stringTool.htmlescape($imgTitle)" alt="img" onerror="$loadDefaultMapImage">
                            <noscript>
                                <img class="preview_image" src="$entry.src" title="$stringTool.htmlescape($imgTitle)" alt="img">
                            </noscript>
                        </a>
                    </p>
                    #if($entry.description)
                        <p class="caption">$entry.description</p>
                    #end
                #if($entry.title)
                    #if(!$entry.get("href"))
                        <p class="caption">$entry.title</p>
                    #elseif($entry.get("extMapUrl"))
                        <p class="caption">
                            <a #if($mapLinksNewTab)target="_blank"#end class="button small" href="$entry.get("extMapUrl")" title="$entry.title">
                                $entry.title
                            </a>
                        </p>
                    #elseif($entry.get("href").toLowerCase().indexOf("getcapabilities") > -1 )
                        <p class="caption">
                            <a #if($mapLinksNewTab)target="_blank"#end class="button small" href="$renderResponse.encodeURL('/portal/main-maps.psml')?layers=${entry.get("href")}" title="$entry.title">
                                $entry.title
                            </a>
                        </p>
                    #end
                #end
                </div>
            #end
        #end
        #if($entry.isExtern)
            <div>
                #if($tool.hasContent($entry.serviceType))
                    #renderServiceType($entry.serviceType)
                #end
                <a target="_blank" class="icon external-link" href="$entry.href" title="$entry.title" rel="noopener noreferrer">
                  <span class="ic-ic-external"></span>
                  <span class="text">$entry.title</span>
                </a>
                #if($tool.hasContent($entry.linkInfo))
                    #if($tool.hasContent($entry.linkInfo))
                        <small class="text">$entry.linkInfo</small>
                    #end
                #end
                #if($tool.hasContent($entry.attachedToField))
                    <small>$stringTool.convertUrlInText($entry.attachedToField)</small>
                #end
                #if($tool.hasContent($entry.description))
                    #set($myDescription = $stringTool.replaceAll($entry.description, '\n', "<br/>"))
                    <small>$stringTool.convertUrlInText(${myDescription})</small>
                #end
            </div>
        #elseif($entry.addressClass)
            <div class="no-image">
                <div class="helper icon">
                    #set($udkAddrClassName = $MESSAGES.getString("udk_adr_class_name_${entry.addressClass}"))
                    #renderUDKAddressIcon($entry.addressClass $udkAddrClassName $udkAddrClassName)
                </div>
                <a href="$entry.href" class="icon" title="$stringTool.htmlescape($entry.title)">
                    <span class="text">$entry.title</span>
                </a>
            </div>
        #elseif($entry.objectClass)
            #if($tool.hasContent($entry.serviceType))
                #renderServiceType($entry.serviceType)
            #end
            #if(!$hasImage)
            <div class="no-image">
                <a href="$entry.href" class="icon" title="$stringTool.htmlescape($entry.title)">
                    #set($udkObjClassName = $Codelists.getCodeListValue('8000', $entry.objectClass, $request.getLocale().getLanguage()))
                    #renderUDKIcon($entry.objectClass $entry.title $udkObjClassName)
                </a>
            #else
            <div class="image">
                #if($showMetadataClassType)
                <div class="helper icon">
                    #set($udkObjClassName = $Codelists.getCodeListValue('8000', $entry.objectClass, $request.getLocale().getLanguage()))
                    #renderUDKIcon($entry.objectClass $udkObjClassName $udkObjClassName)
                </div>
                #end
                <a href="$entry.href" class="icon" title="$stringTool.htmlescape($entry.title)">
                    <span class="text">$entry.title</span>
                </a>
            #end
            #if($tool.hasContent($entry.linkInfo))
                #if($tool.hasContent($entry.linkInfo))
                    <small class="text">$entry.linkInfo</small>
                #end
            #end
            #if($displayPreview)
                #if($tool.hasContent($entry.graphicOverview))
                    #set($canSwipe = false)
                    #if($entry.graphicOverview.size() > 1)
                        #set($canSwipe = true)
                    #end
                    #if($canSwipe)
                    <div class="preview">
                        <div class="swiper-container swiper-container-background">
                            <div class="swiper-wrapper">
                            #foreach($graphic in $entry.graphicOverview)
                                <div class="swiper-slide">
                                    <p class="caption">
                                        <a target="_blank" class="external-link" href="$graphic" title="$entry.title" rel="noopener noreferrer">
                                            <img class="preview_image" #if($graphic.indexOf("https") == -1) src="./" data-src="$graphic" #else src="$graphic" #end title="$stringTool.htmlescape($entry.title)" alt="img" onerror="$loadDefaultMapImage">
                                            <noscript>
                                                <img class="preview_image" src="$graphic" title="$stringTool.htmlescape($entry.title)" alt="img">
                                            </noscript>
                                        </a>
                                    </p>
                                </div>
                            #end
                            </div>
                            <div class="swiper-pagination"></div>
                        </div>
                    </div>
                    #elseif($tool.hasContent($entry.graphicOverview.get(0)))
                    <div class="preview">
                        <a target="_blank" class="external-link" href="$entry.graphicOverview.get(0)" title="$entry.title" rel="noopener noreferrer">
                            <img class="preview_image" #if($entry.graphicOverview.get(0).indexOf("https") == -1) src="./" data-src="$entry.graphicOverview.get(0)" #else src="$entry.graphicOverview.get(0)" #end title="$stringTool.htmlescape($entry.title)" alt="img" onerror="$loadDefaultMapImage">
                            <noscript>
                                <img class="preview_image" src="$entry.graphicOverview.get(0)" title="$stringTool.htmlescape($imgTitle)" alt="img">
                            </noscript>
                        </a>
                    </div>
                    #end
                #end
            #end
            #if($tool.hasContent($entry.description))
                <div class="description">
                    #if($cutSumHTMLNewLine)
                        #set($myDescription = $stringTool.replaceAll($entry.description, "\n", "<br>"))
                    #else
                        #set($myDescription = $stringTool.replaceAll($entry.description, "\n", " "))
                    #end
                    <small class="description">$stringTool.convertUrlInText(${myDescription})</small>
                </div>
            #end
            #if($tool.hasContent($entry.extMapUrl))
                <a #if($mapLinksNewTab)target="_blank"#end class="button outline pill" href="$entry.extMapUrl" title="$MESSAGES.getString('common.result.showMap.tooltip')">
                    $MESSAGES.getString('common.result.showMap')
                </a>
            #elseif($tool.hasContent($entry.mapLink))
                <a #if($mapLinksNewTab)target="_blank"#end class="button outline pill" href="$renderResponse.encodeURL('/portal/main-maps.psml')?layers=$entry.mapLink" title="$MESSAGES.getString('common.result.showMap.tooltip')">
                    $MESSAGES.getString('common.result.showMap')
                </a>
            #end
            </div>
        #elseif($entry.noLink)
            <div>
                $entry.title
            </div>
        #elseif($entry.isDownload)
            <div class="download">
                #if($entry.title != $MESSAGES.getString('xml_link'))
                    #if($tool.hasContent($entry.serviceType))
                        #renderServiceType($entry.serviceType)
                    #end
                #end
                <a target="_blank" href="$entry.href" class="icon external-link" title="$stringTool.htmlescape($entry.title)" rel="noopener noreferrer">
                  <span class="ic-ic-download"></span>
                  <span class="text">$entry.title</span>
                </a>
                #if($tool.hasContent($entry.description))
                    #if($cutSumHTMLNewLine)
                        #set($myDescription = $stringTool.replaceAll($entry.description, "\n", "<br>"))
                    #else
                        #set($myDescription = $stringTool.replaceAll($entry.description, "\n", " "))
                    #end
                    <small class="description">${myDescription}</small>
                #end
            </div>
        #elseif(!$entry.isMapLink)
            <div>
                <a href="$entry.href" class="icon" title="$stringTool.htmlescape($entry.title)">
                    <span class="ic-ic-karte"></span>
                    <span class="text">$entry.title</span>
                </a>
            </div>
        #end
    #end
#end

#macro (renderLinkLineAddress $entry)
    <div>
    #if($entry.isExtern)
        <a target="_blank" class="external-link" href="$entry.href" title="$MESSAGES.getString('common.alt.icon.extern')">$entry.title</a>
    #else
        <a href="$entry.href" title="$MESSAGES.getString('common.alt.icon.intern')">$entry.title</a>
    #end
    </div>  
#end

#macro (renderUdkClass $type)
    $Codelists.getCodeListValue('8000', ${type}, $lang)
#end

#macro (renderAddressType $type)
    $MESSAGES.getString("udk_adr_class_name_$type")
#end

#macro (renderMultiLine $entry)
    #if($tool.hasContent($entry.elements))
        #if($tool.hasContent($entry.headerTitle))
            #renderSectionTitle($entry.headerTitle)
        #end
        #if($tool.hasContent($entry.title))
            #renderGroupTitle($entry.title)
        #end
        #if($tool.hasContent($entry.sort))
            #if($entry.sort == "false")
                #set($elements = $entry.elements)
            #else
                #set ($hasBody = false)
                #set ($hasBody = $sorter.sort($entry.elements,"body"))
                #if ($hasBody)
                    #set($elements = $hasBody)
                #else
                    #set($elements = $entry.elements)
                #end
            #end
        #else
            #set($elements = $entry.elements)
        #end
        #foreach($e in $elements)
            #if($e.type)
                #if($e.type=="multiLine")
                    #renderMultiLine($e)
                #elseif($e.type=="multiLineImage")
                    #renderMultiLineImage($e)
                #elseif($e.type=="textLine")
                    #renderTextLine($e)
                #elseif($e.type=="textList")
                    ##renderTextList($e)
                #elseif($e.type=="textLinkLine")
                    #renderTextLinkLine($e)
                #elseif($e.type=="linkLine")
                    #renderLinkLine($e)
                #elseif($e.type=="linkLineAddress")
                    #renderLinkLineAddress($e)
                #elseif($e.type=="textLabelAbove")
                    #renderTextLabelAbove($e)
                #elseif($e.type=="textLabelDuring")
                    #renderTextLabelDuring($e)
                #elseif($e.type=="textLabelLeft")
                    #renderTextLabelLeft($e)
                #elseif($e.type=="line")
                    <hr />
                #end
            #end
        #end
    #end
#end

#macro (renderMultiLineImage $entry)
    #if($tool.hasContent($entry.elements))
        #set($canSwipe = false)
        #if($entry.elements.size() > 1)
            #set($canSwipe = true)
        #end
        #if($canSwipe)
        <div class="swiper-container swiper-container-background">
            <div class="swiper-wrapper">
        #else
        <div class="swiper-container-background">
        #end
        #foreach($e in $entry.elements)
            #if($e.type=="multiLine")
                #renderMultiLine($e)
            #elseif($e.type=="multiLineImage")
                #renderMultiLineImage($e)
            #elseif($e.type=="linkLine")
                #renderLinkLine($e true)
            #end
        #end
        #if($canSwipe)
            </div>
            #if($entry.elements.size() > 1)
            <div class="swiper-pagination"></div>
            #end
        </div>
        #else
        </div>
        #end
    #end
    #if($entry.extMapUrl)
    <p class="caption">
        <a #if($mapLinksNewTab)target="_blank"#end class="button small" href="$entry.extMapUrl" title="$MESSAGES.getString("common.result.showMap.tooltip.short")">
            $MESSAGES.getString("common.result.showMap.tooltip.short")
        </a>
    </p>
    #elseif($entry.href)
    <p class="caption">
        <a #if($mapLinksNewTab)target="_blank"#end class="button small" href="$renderResponse.encodeURL('/portal/main-maps.psml')?layers=${entry.get("href")}" title="$MESSAGES.getString("common.result.showMap.tooltip.short")">
            $MESSAGES.getString("common.result.showMap.tooltip.short")
        </a>
    </p>
    #end
#end

#macro (renderMultiLineHalf $entry)
    #if($tool.hasContent($entry.elements))
        #renderGroupTitle($entry.title)
        #if($tool.hasContent($entry.sort))
            #if($entry.sort == "false")
                #set($elements = $entry.elements)
            #else
                #set ($hasBody = false)
                #set ($hasBody = $sorter.sort($entry.elements,"body"))
                #if ($hasBody)
                    #set($elements = $hasBody)
                #else
                    #set($elements = $entry.elements)
                #end
            #end
        #else
            #set($elements = $entry.elements)
        #end
        #foreach($e in $elements)
            #renderTypeHalf($e)
        #end
    #end
#end

## *************************
## New Detail macros
## *************************

#macro (renderMultiLineAddresses $title $entries $isMeta $isFactSheet $isAddress)
    #if($isMeta == true)
        <div class="table table--lined">
            <table>
                <tr>
                #if($tool.hasContent($title))
                    <th>$title</th>
                #end
                    <td>
                        #set($count = 0)
                        #set($entryLength = $entries.getLength() - 1)
                        #foreach($number in [0..$entryLength])
                            #set($node = $entries.item($number))
                            #set($xPath = "./idf:idfResponsibleParty")
                            #if($TOOL.nodeExist($xPath, $node))
                                #set($xParentPath = "./idf:idfResponsibleParty")
                            #else
                                #set($xParentPath = "./gmd:CI_ResponsibleParty")
                            #end
                            #set($xPath = "$xParentPath/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress")
                            #set($tmpTitle = $TOOL.getValueFromXPath($xPath, null, $node))
                            <div>
                                <a class="icon" href="mailto:${tmpTitle.replace(" ","")}" title="$tmpTitle">
                                    <span class="ic-ic-mailto"></span>
                                    <span class="text">$tmpTitle</span>
                                </a>
                            </div>
                        #end
                    </td>
                </tr>
            </table>
        </div>
    #else
        #if($entries)
            #set($count = 0)
            #foreach($entry in $entries)
            #if($isFactSheet)
                #if($count == 1)
                    #break
                #end
            #end
            #if(!$isFactSheet)
            <div class="sub-section">
            <div class="table table--lined">
            #end
                #if($tool.hasContent($title))
                    #if(!$isFactSheet)
                        #renderGroupTitle($title)
                    #elseif($isAddress)
                        #renderGroupTitle($title)
                    #end
                #end
                #if(!$isFactSheet)
                    <a class="anchor" id="${hashDetail8}_contact-${count}"></a>
                #end
                #set($count = $count + 1)
                    #set($node = $entry)
                    #set($xPath = "")
                    #if($TOOL.nodeExist("./idf:idfResponsibleParty", $node))
                        #set($xParentPath = "./idf:idfResponsibleParty")
                    #elseif($TOOL.nodeExist("./gmd:CI_ResponsibleParty", $node))
                        #set($xParentPath = "./gmd:CI_ResponsibleParty")
                    #else
                        #set($xParentPath = ".")
                    #end
                    
                    #set($uuid = "")
                    #set($xPath = "$xParentPath/gmd:role/gmd:CI_RoleCode/@codeListValue")
                    
                    #set($addressRole = "")
                    #if($TOOL.nodeExist($xPath, $node))
                        #if($distributionContactCodelistValue && $node.getLocalName() == "distributorContact")
                            #set($addressRole = $TOOL.getValueFromCodeList("505", $distributionContactCodelistValue))
                        #else
                            #set($addressRole = $TOOL.getValueFromXPath($xPath, "505", $node))
                        #end
                    #end
                    
                    #if(!$isFactSheet)
                        #if($TOOL.nodeExist($xPath, $node))
                            <h5>$addressRole</h5>
                        #end
                    <table>
                    #end
                    
                    #if($isFactSheet)
                        #if($TOOL.nodeExist($xPath, $node))
                        #renderFactTitle($addressRole)
                        #end
                    #end
                    #if(!$isFactSheet)
                    <tr>
                    <td>
                    #end
                        #parse ('/WEB-INF/templates/detail/parts/search_detail_idf/search_detail_idf_part_address.vm')
                        #if(!$isFactSheet || $isAddress)
                        <p>
                            ## "Street"
                            #set($xPath = "$xParentPath/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:deliveryPoint")
                            #if($TOOL.nodeExist($xPath, $node))
                                #set($deliveryPoint = $TOOL.getNodeListFromXPath($xPath, $node))
                                #set($deliveryPointLength = $deliveryPoint.getLength() - 1)
                                #foreach($deliveryPointNumber in [0..$deliveryPointLength])
                                    #set($delivery = $TOOL.getValueFromXPath(".", null, $deliveryPoint.item($deliveryPointNumber)))
                                    #if($delivery.startsWith("Postbox"))
                                        #set($deliverySplit = $delivery.split(","))
                                        #foreach($d in $deliverySplit)
                                            #if($d.startsWith("Postbox"))
                                                #set($postboxVal = $d.replace("Postbox ", ""))
                                                #if($postboxVal.indexOf($MESSAGES.getString("postbox_label")) == -1)
                                                    $MESSAGES.getString("postbox_label") $postboxVal
                                                #else
                                                    $postboxVal
                                                #end
                                            #else
                                                $d
                                            #end
                                            <br>
                                        #end
                                    #elseif($delivery.matches("\\d*"))
                                        $MESSAGES.getString("postbox_label") $delivery
                                        <br>
                                    #else
                                        #if($deliveryPointLength > 1)
                                            <br>
                                        #end
                                        $delivery
                                    #end
                                #end
                                <br>
                            #end
                            ## "Postcode"
                            #set($xPath = "$xParentPath/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:postalCode")
                            #if($TOOL.nodeExist($xPath, $node))
                                $TOOL.getValueFromXPath($xPath, null, $node)
                            #end
                            ## "City"
                            #set($xPath = "$xParentPath/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:city")
                            #if($TOOL.nodeExist($xPath, $node))
                                $TOOL.getValueFromXPath($xPath, null, $node)
                                <br>
                            #end
                            ## "Country"
                            #set($xPath = "$xParentPath/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:country")
                            #if($TOOL.nodeExist($xPath, $node))
                                $TOOL.getCountryValue($TOOL.getValueFromXPath($xPath, null, $node))
                            #end
                        </p>
                        #end
                        ## E-Mail
                        #set($xPath = "$xParentPath/gmd:contactInfo/gmd:CI_Contact/gmd:address/gmd:CI_Address/gmd:electronicMailAddress")
                        #if($TOOL.nodeExist($xPath, $node))
                            ## $TOOL.getNameFromCodeList("4430", "3")
                            #set($tmpTitle = $TOOL.getValueFromXPath($xPath, null, $node))
                            <div>
                                <a class="icon" href="mailto:${tmpTitle.replace(" ","")}" title="$stringTool.htmlescape($tmpTitle)">
                                    <span class="ic-ic-mailto"></span>
                                    <span class="text">$tmpTitle</span>
                                </a>
                            </div>
                        #end
                        ## Telefon
                        #set($xPath = "$xParentPath/gmd:contactInfo/gmd:CI_Contact/gmd:phone/gmd:CI_Telephone/gmd:voice")
                        #if($TOOL.nodeExist($xPath, $node))
                            ## $TOOL.getNameFromCodeList("4430", "1")
                            #set($tmpTitle = $TOOL.getValueFromXPath($xPath, null, $node))
                            <div>
                                <a class="icon" href="tel:${tmpTitle.replace(" ","")}" title="$stringTool.htmlescape($tmpTitle)">
                                    <span class="ic-ic-phone"></span>
                                    <span class="text">$tmpTitle</span>
                                </a>
                            </div>
                        #end
                        ## Fax
                        #set($xPath = "$xParentPath/gmd:contactInfo/gmd:CI_Contact/gmd:phone/gmd:CI_Telephone/gmd:facsimile")
                        #if($TOOL.nodeExist($xPath, $node))
                            ## $TOOL.getNameFromCodeList("4430", "2")
                            #set($tmpTitle = $TOOL.getValueFromXPath($xPath, null, $node))
                            <div>
                                <a class="icon" href="fax:${tmpTitle.replace(" ","")}" title="$stringTool.htmlescape($tmpTitle)">
                                    <span class="ic-ic-fax"></span>
                                    <span class="text">$tmpTitle</span>
                                </a>
                            </div>
                        #end
                        ## URL
                        #set($xPath = "$xParentPath//gmd:contactInfo/gmd:CI_Contact/gmd:onlineResource/gmd:CI_OnlineResource/gmd:linkage/gmd:URL")
                        #if($TOOL.nodeExist($xPath, $node))
                            ## $TOOL.getNameFromCodeList("4430", "4")
                            #set($url = $TOOL.getValueFromXPath($xPath, null, $node))
                            #if($url.startsWith("http"))
                                #set($url = $url)
                            #else 
                                #set($url = "http://$url")
                            #end
                            <div>
                                <a target="_blank" class="icon external-link" href="$url" title="$url">
                                    <span class="ic-ic-external"></span>
                                    <span class="text">$url</span>
                                </a>
                            </div>
                        #end
                        ## Servicezeiten
                        #set($xPath = "$xParentPath/gmd:contactInfo/gmd:CI_Contact/gmd:hoursOfService/gco:CharacterString")
                        #if($TOOL.nodeExist($xPath, $node))
                            <div>
                                $MESSAGES.getString('t02_address.hours_of_service')
                                $TOOL.getValueFromXPath($xPath, null, $node)
                            </div>
                        #end
                        #if(!$isFactSheet)
                        </td>
                    </tr>
                </table>
            </div>
            </div>
                        #end
            #end
        #end
    #end
#end

#macro(renderTypeHalf $e)
    #if($e.type)
        #if($e.type=="multiLine")
            #renderMultiLineHalf($e)
        #elseif($e.type=="textLine")
            #renderTextLine($e)
        #elseif($e.type=="textList")
            #renderTextList($e)
        #elseif($e.type=="textLinkLine")
            #renderTextLinkLine($e)
        #elseif($e.type=="linkLine")
            #renderLinkLineAddress($e)
        #elseif($e.type=="textLabelAbove")
            #renderTextLabelAbove($e)
        #elseif($e.type=="textLabelDuring")
            #renderTextLabelDuring($e)
        #elseif($e.type=="textLabelLeft")
            #renderTextLabelLeft($e)
        #elseif($e.type=="line")
            <hr />
        #end
    #end
#end

#macro (renderImageLine $entry)
        #renderSectionTitle ($entry.title)
        #set($elements = $entry.elements)
        #foreach($e in $elements)
            <div class="detail_group_line">
                <div class="detail_group">
                    #renderImageTable($e "" "")
                </div>
            </div>
        #end
#end

## Render section title
#macro (renderSectionTitle $title)
    #if($tool.hasContent($title))
        <h3>$title</h3>
    #end
#end

## Render group title
#macro (renderGroupTitle $entry)
    #if($tool.hasContent($entry))
        <h4>$entry</h4>
    #end
#end

## Render title
##macro (renderTitle $entry)
##  <h1>$entry</h1>
##  <span class="clearer"></span>
##end

## Render image with description and title
#macro (renderImageTable $image $data_info $descr)
    <table class="detail_image_table">
        <tr>
            <td class="detail_image_td">
                ##<img src="$entry.imgUrl" alt="$MESSAGES.getString('common.alt.icon.extern')" />
                <img class="detail_image" src="$image" alt="$MESSAGES.getString('common.alt.icon.extern')" />
            </td>
        </tr>
        #if ($data_info != "")
        <tr class="detail_image_tr">
            <td class="detail_image_descr_td">
                <p class="detail_image_p">$data_info</p>
                <p class="detail_image_descr_p">$descr</p>
            </td>
        </tr>
        #end
    </table>
#end

## Render Table
#macro (renderTable $entry $increaseColumns)
    #if($tool.hasContent($increaseColumns))
        #renderTableTitle("" $entry "" "" "" $increaseColumns)
    #else
      #renderTableTitle("" $entry "")
    #end
#end

#macro (renderTableSymbols $entry $symbolColumn $symbolList $increaseColumns $additionalRows $headCenter)
    #renderTableTitle("" $entry "" $symbolColumn $symbolList $increaseColumns $additionalRows $headCenter)
#end


#macro (renderTableTitle $title $entry $space $symbolColumn $symbolList $increaseColumns $additionalRows $setCenter)
    #if($tool.hasContent($entry.get("body")))
        <div class="table">
            #if($entry.title)
                <h5>$entry.title</h5>
            #end
            <table>
            #if($tool.hasContent($entry.get("head")))
                <thead>
                    <tr>
                    #set($num = 0)
                    #foreach($th in $entry.head)
                        #set($isIncreaseColumn = false)
                        #if($increaseColumns)
                            #if($increaseColumns.indexOf($num) > -1)
                                #set($isIncreaseColumn = true)
                            #end
                        #end
                        <th #if($isIncreaseColumn)class="column--increase"#end #if($setCenter) style="text-align:center;"#end>$th</th>
                        #set($num = $num + 1)
                    #end
                    </tr>
                </thead>
            #end
            #foreach($tr in $entry.body)
                <tr>
                #set($num = 0)
                #foreach($td in $tr)
                    #if($entry.types)
                        #set($bodyType = $entry.types.get($num))
                        #if($bodyType == "link")
                            <td><a href="$td" title="$stringTool.htmlescape($td)">$td</a></td>
                        #else
                            <td>$td</td>
                        #end
                    #else
                        #if($symbolColumn && $symbolColumn.indexOf($num) > -1)
                        <td class="symbol" #if($setCenter) style="text-align:center;"#end>
                            #if($symbolList)
                                #foreach($symbolEntry in $symbolList)
                                    #if($symbolEntry.value == $td)
                                        $symbolEntry.symbol
                                    #end
                                #end
                            #else
                                $td
                            #end
                        </td>
                        #else
                        <td>
                            $td
                        </td>
                        #end
                    #end
                    #set($num = $num + 1)
                #end
                </tr>
            #end
            #foreach($additionalRow in $additionalRows)
                #if($additionalRow)
                    #set($additionalRowValue = $TOOL.getValueFromXPath($additionalRow.xpath))
                    #if($additionalRowValue)
                    <tr>
                        <th>$additionalRow.title</th>
                        #set($colspan = $entry.head.size() - 1)
                        <td colspan="$colspan">$TOOL.getValueFromXPath($additionalRow.xpath)</td>
                    </tr>
                    #end
                #end
            #end
            </table>
        </div>
    #else
        #if($space != "")
            #renderTextTable($title $space)
        #end
    #end
#end

#macro (renderTableAsList $title $entry $hideTitle)
    #if($tool.hasContent($entry.get("body")))
        <div class="table #if($hideTitle) table--lined #else table--lined--list #end">
            #if(!$hideTitle && $entry.title)
                <h5>$entry.title</h5>
            #end
            <table>
            #set($num = 0)
            #foreach($th in $entry.head)
                #set($body = $entry.body.get($num))
                #if($body && $body.size() > 0)
                    <tr>
                    #if($tool.hasContent($entry.get("head")))
                        <th>$th</th>
                    #else
                        <th></th>
                    #end
                        <td>
                    #foreach($td in $body)
                        #if($td)
                        <p>$td</p>
                        #else
                        <p>-</p>
                        #end
                    #end
                        </td>
                    </tr>
                #end
                #set($num = $num + 1)
            #end
            </table>
        </div>
    #else
        #if($space != "")
            #renderTextTable($title $space)
        #end
    #end
#end

## Render text in line
#macro (renderTextLine $entry)
    #if($tool.hasContent($entry.body))
        #if($tool.hasContent($entry.title))
            <div class="table--lined">
                <table>
                    <tbody>
                        <tr>
                            <th>$entry.title</th>
                            <td>$entry.body</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        #else
            <p>$entry.body</p>
        #end
    #end
#end

## Render link in line
#macro (renderTextLinkLine $entry)
    #if($tool.hasContent($entry.body))
        <div class="table--lined">
            <table>
                <tbody>
                    <tr>
                        <th>$entry.title</th>
                        <td>
                            <a href="$entry.href" title="$entry.altText">$entry.body</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    #end
#end

## Render entry in line
#macro (renderEntryInLine $entry)
    #if($tool.hasContent($entry.title))
        <table>
            <tr>
                <td>$entry.title</td>
                <td>$entry.body</td>
            </tr>
        </table>
    #end
#end

## Render entry
#macro (renderEntry $entry)
    #if($tool.hasContent($entry.body))
        #if($tool.hasContent($entry.header))
            #renderSectionTitle($entry.header)
        #end
        <div>
        #if($tool.hasContent($entry.title))
            <p>$entry.title</p>
            &nbsp;
        #end
        <p>$entry.body</p>
        </div>
     #end
#end

## Render link in list
#macro (renderLinkList $title $linkList $titleAsSection)
    #renderLinkListImage ($title $linkList $titleAsSection false)
#end
#macro (renderLinkListImage $title $linkList $titleAsSection $hasImage)
    #renderLinkListImage ($title $linkList $titleAsSection $hasImage "")
#end

#macro (renderLinkListImageLimit $title $linkList $titleAsSection $hasImage $listLimit $expandId $titleTag $linkListInclude $displayPreview)
    #if($tool.hasContent($linkList) || $tool.hasContent($linkListInclude))
        #if($titleAsSection == "true")
            #if($tool.hasContent($title))
                #renderSectionTitle($title)
            #end
        #end
        #if($titleAsSection == "false")
            #if($tool.hasContent($title))
                #if($titleTag)
                    <$titleTag>$title</$titleTag>
                #else
                    <h4>$title</h4>
                #end 
            #end
        #end
        <div class="document-list">
            #set($countLinksAll = 0)
            #set($numberLinksAll = $linkList.size())
            #if($linkListInclude)
                #set($numberLinksAll = $numberLinksAll + $linkListInclude.size())
            #end
            #set($addLinksExpand = false)
            #foreach($link in $sorter.sort($linkList,"title"))
                #if($countLinksAll >= $listLimit && $numberLinksAll > $listLimit && $addLinksExpand == false)
                    #if($expandId != "")
                        #set($addLinksExpand = true)
                        <button type="button" id="${expandId}" class="js-expander button outline" title="$MESSAGES.getString('search.detail.info.links.more')">
                            $MESSAGES.getString('search.detail.info.links.more')
                        </button>
                        <div class="js-expander-content ${expandId} is-hidden ">
                    #else
                        <a class="button outline" title="$MESSAGES.getString('search.detail.info.links.more')" href="#${hashDetail3}">
                            $MESSAGES.getString('search.detail.info.links.more')
                        </a>
                        #break
                    #end
                #end
                <div class="list-item">
                    #renderLinkLine($link $hasImage $displayPreview)
                </div>
                #set($countLinksAll = $countLinksAll + 1)
            #end
            #if($linkListInclude)
                #foreach($link in $sorter.sort($linkListInclude,"title"))
                    #if($countLinksAll >= $listLimit && $numberLinksAll > $listLimit && $addLinksExpand == false)
                        #if($expandId != "")
                            #set($addLinksExpand = true)
                            <button type="button" id="${expandId}" class="js-expander button outline" title="$MESSAGES.getString('search.detail.info.links.more')">
                                $MESSAGES.getString('search.detail.info.links.more')
                            </button>
                            <div class="js-expander-content ${expandId} is-hidden ">
                        #else
                            <a class="button outline" title="$MESSAGES.getString('search.detail.info.links.more')" href="#${hashDetail3}">
                                $MESSAGES.getString('search.detail.info.links.more')
                            </a>
                            #break
                        #end
                    #end
                    <div class="list-item">
                        #renderLinkLine($link $hasImage $displayPreview)
                    </div>
                    #set($countLinksAll = $countLinksAll + 1)
                #end
            #end
            #if($addLinksExpand)
                #set($addLinksExpand = false)
                </div>
                <button type="button" class="button outline js-expander-close ${expandId} is-hidden" title="$MESSAGES.getString('search.detail.info.links.less')">
                    $MESSAGES.getString('search.detail.info.links.less')
                </button>
            #end
        </div>
        
    #end
#end

## Render Citation
#macro (renderCitation $title $entry $asTable $countEntries)
    #if($tool.hasContent($entry))
        #set($list = [])
        #foreach($citation in $entry)
            #set($content = "")
            #if($tool.hasContent($citation.uuid) && $tool.hasContent($citation.title))
                #set($content = $content + '<a class="external-link" href="?docuuid=' + $citation.uuid + '" target="_blank" title="' + $citation.title + '">' + "$citation.title</a>")
            #else
                #if($tool.hasContent($citation.authors))
                    #set($content = $content + "<b>$citation.authors</b> ")
                #end
                #if($tool.hasContent($citation.year))
                    #set($content = $content + "<b>($citation.year):</b> ")
                #end
                #if($tool.hasContent($citation.title))
                    #set($content = $content + "<i>$citation.title</i>#if($tool.hasContent($citation.doi_type)) [$citation.doi_type]#end. ")
                #end
                #if($tool.hasContent($citation.publisher))
                    #set($content = $content + "$citation.publisher. ")
                #end
                #if($tool.hasContent($citation.doi))
                    #set($content = $content + '<a class="external-link" href="' + $citation.doi + '" target="_blank" title="' + $citation.doi + '">' + "$citation.doi</a>")
                #end
            #end
            #if(!$content.isEmpty())
                #set($add = $list.add($content))
            #end
        #end
        #if($asTable)
            #renderTextListTable($title $list)
        #else
            <h4>
                $title
                #if($countEntries)
                    <span>($entry.size())</span>
                #end
            </h4>
            <div class="document-list">
                #foreach($citation in $list)
                    <div class="list-item">
                        $citation
                    </div>
                #end
            </div>
        #end
    #end
#end

## Render list
#macro (renderTextList $title $textList)
    #renderTextListSpace ($title $textList "")
#end

#macro (renderTextListSpace $title $textList $space)
    #renderTextListSpaceList ($title $textList $space true)
#end

#macro (renderTextListSpaceList $title $textList $space $asList )
    #renderTextListSpaceListConvertUrl($title $textList $space true false)
#end

#macro (renderTextListSpaceListConvertUrl $title $textList $space $asList $convertUrl)
    #if($tool.hasContent($textList))
        #if($tool.hasContent($title))
            <h4>$title</h4>
            ##renderGroupTitle($entry.title)
        #end
        #if($asList)
            <div class="text-list">
            #foreach($text in $sorter.sort($textList,"body"))
                #set($tmpText = $text.replaceAll("<svg.*svg>", ""))
                #if($convertUrl)
                    #set($tmpText = $stringTool.convertUrlInText($tmpText))
                #end
                <p class="list-item">$tmpText</p>
            #end
            </div>
        #else
            <div class="text-list">
            #foreach($text in $sorter.sort($textList,"body"))
                #set($tmpText = $text.replaceAll("<svg.*svg>", ""))
                #if($convertUrl)
                    #set($tmpText = $stringTool.convertUrlInText($tmpText))
                #end
                <p class="list-item">$tmpText</p>
            #end
            </div>
        #end
    #else
        #if($space != "")
            #renderTextLabelAbove($title $space)
        #end
    #end
#end

#macro (renderTextTable $title $entry $cssClass $defaultEntry)
    #renderTextTableConvertUrl($title $entry $cssClass $defaultEntry false)
#end

#macro (renderTextTableConvertUrl $title $entry $cssClass $defaultEntry $convertUrl)
    #if($tool.hasContent($entry))
    <div class="table table--lined">
        <table>
            <tr>
            #if($tool.hasContent($title))
                <th>$title</th>
            #end
                <td>
                    #set($tmpText = $entry)
                    #if($convertUrl)
                        #set($tmpText = $stringTool.convertUrlInText($tmpText))
                    #end
                    <p #if($tool.hasContent($cssClass))class="$cssClass"#end>$tmpText</p>
                </td>
            </tr>
        </table>
    </div>
    #elseif($tool.hasContent($defaultEntry))
    <div class="table table--lined">
        <table>
            <tr>
            #if($tool.hasContent($title))
                <th>$title</th>
            #end
                <td>
                    #set($tmpText = $defaultEntry)
                    #if($convertUrl)
                        #set($tmpText = $stringTool.convertUrlInText($tmpText))
                    #end
                    <p #if($tool.hasContent($cssClass))class="$cssClass"#end>$tmpText</p>
                </td>
            </tr>
        </table>
    </div>
    
    #end
#end

#macro (renderTextListTable $title $entryList $expandable $defaultEntry)
    #renderTextListTableConvertUrl($title $entryList $expandable $defaultEntry false)
#end

#macro (renderTextListTableConvertUrl $title $entryList $expandable $defaultEntry $convertUrl)
    #if($tool.hasContent($entryList))
    <div class="table table--lined">
        <table>
            <tr>
            #if($tool.hasContent($title))
                <th>$title</th>
            #end
                <td>
                    #if($expandable)
                    <div class="js-expand-box js-expand-text js-non-expand-text">
                        <div class="js-expand-text-content">
                    #end
                            <div class="text-list">
                            #foreach($entry in $entryList)
                                #set($tmpText = $entry)
                                #if($convertUrl)
                                    #set($tmpText = $stringTool.convertUrlInText($tmpText))
                                #end
                                <p class="list-item">$tmpText</p>
                            #end
                            </div>
                            
                    #if($expandable)
                            </div>
                            <div class="desc-fade"></div>
                        </div>
                        <button type="button" class="js-open-expand-text button outline is-hidden" title="$MESSAGES.getString('search.detail.info.more')">
                            $MESSAGES.getString('search.detail.info.more')
                        </button>
                        <button type="button" class="js-close-expand-text button outline is-hidden" title="$MESSAGES.getString('search.detail.info.less')">
                            $MESSAGES.getString('search.detail.info.less')
                        </button>
                    </div>
                    #end
                </td>
            </tr>
        </table>
    </div>
    #elseif($defaultEntry)
        #if($convertUrl)
            #renderTextTableConvertUrl($title $space)
        #else
            #renderTextTable($title $space)
        #end
    #end
#end

#macro (renderLinkTable $title $entry $cssClass)
    #if($tool.hasContent($entry))
    <div class="table table--lined ${cssClass}">
        <table>
            <tr>
            #if($tool.hasContent($title))
                <th>$title</th>
            #end
                <td>
                    #if($entry.type)
                        #renderLinkLine($entry)
                    #else
                        $entry
                    #end
                </td>
            </tr>
        </table>
    </div>
    #end
#end

#macro (renderLinkListTable $title $entryList $cssClass $expandable $expandableId)
    #if($tool.hasContent($entryList))
    <div class="table table--lined ${cssClass}">
        <table>
            <tr>
            #if($tool.hasContent($title))
                <th>$title</th>
            #end
                <td>
                #if($expandable)
                    #set($listCount = 0)
                    #set($listLimit = 5)
                    #set($listExpand = false)
                    #set($isMoreId = false)
                    #set($paramMore = $request.getParameter("more"))
                    #if($paramMore && $paramMore.indexOf($expandableId) > -1)
                        #set($isMoreId = true)
                    #end
                    #foreach($entry in $entryList)
                        #if($listCount >= $listLimit && $listExpand == false)
                            #set($listExpand = true)
                            <button type="button" id="$expandableId" class="js-expander js-open-expand-text button outline $expandableId #if($isMoreId)is-hidden #end" title="$MESSAGES.getString('search.detail.info.more')">
                                $MESSAGES.getString('search.detail.info.more')
                            </button>
                            <div class="js-expander-content $expandableId #if(!$isMoreId)is-hidden#end">
                        #end
                        #renderLinkLine($entry)
                        #set($listCount = $listCount + 1)
                    #end
                    #if($listExpand)
                        #set($listExpand = false)
                        </div>
                        <button type="button" class="js-open-expand-text button outline js-expander-close $expandableId #if(!$isMoreId)is-hidden #end" title="$MESSAGES.getString('search.detail.info.less')">
                            $MESSAGES.getString('search.detail.info.less')
                        </button>
                    #end
                #else
                    #foreach($entry in $entryList)
                        #renderLinkLine($entry)
                    #end
                #end
                </td>
            </tr>
        </table>
    </div>
    #end
#end

#macro (renderLinkLineTableRow $entry)
    <tr class="list-item">
        <td>
            #if($link.isExtern)
                <span class="ic-ic-external"></span>
            #end
        </td>
        <td>
            #if($entry.objectClass)
                #renderLinkLine($entry)
            #else
            <a href="$entry.href" title="$entry.title">
                $entry.title
            </a>
            #end
        </td>
    </tr>
#end

#macro (renderTableList $title $textList $expandable $expandableId $limit)
    #if($tool.hasContent($textList))
    <div class="table list">
        <table>
            <tbody>
                <tr>
                    <td>$title</td>
                    <td>
                        #if($expandable)
                            #set($listCount = 0)
                            #set($listLimit = $limit)
                            #set($listExpand = false)
                            #set($isMoreId = false)
                            #set($paramMore = $request.getParameter("more"))
                            #if($paramMore && $paramMore.indexOf($expandableId) > -1)
                                #set($isMoreId = true)
                            #end
                            #foreach($entry in $sorter.sort($textList,"body"))
                                #if($listCount >= $listLimit && $listExpand == false)
                                    #set($listExpand = true)
                                    <button type="button" id="$expandableId" class="js-expander js-open-expand-text button outline $expandableId #if($isMoreId)is-hidden #end" title="$MESSAGES.getString('search.detail.info.more')">
                                        $MESSAGES.getString('search.detail.info.more')
                                    </button>
                                    <span class="js-expander-content $expandableId #if(!$isMoreId)is-hidden#end">
                                #end
                                <span class="list_entry">$entry</span>
                                #set($listCount = $listCount + 1)
                            #end
                            #if($listExpand)
                                #set($listExpand = false)
                                </span>
                                <button type="button" style="display:block" class="js-open-expand-text button outline js-expander-close $expandableId #if(!$isMoreId)is-hidden #end" title="$MESSAGES.getString('search.detail.info.less')">
                                    $MESSAGES.getString('search.detail.info.less')
                                </button>
                            #end
                        #else
                            #foreach($text in $sorter.sort($textList,"body"))
                                <span class="list_entry">$text</span>
                            #end
                        #end
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    #end
#end

#macro (renderTableLinkList $title $linkList)
    #if($tool.hasContent($linkList))
        <div class="row">
            <div class="xsmall-24 small-24 large-5 columns">
                <span>$title</span>
            </div>
            <div class="xsmall-24 small-24 large-19 columns">
                #foreach($link in $sorter.sort($linkList,"title"))
                    #renderLinkLine($link)
                    <br>
                #end
            </div>
        </div>
    #end
#end

#macro (renderIconTextList $title $textList)
    #if($tool.hasContent($textList))
        #if($tool.hasContent($title))
            <h4>$title</h4>
            ##renderGroupTitle($entry.title)
        #end
        <div class="list-item">
        #foreach($text in $sorter.sort($textList,"text"))
             <div>
                <span class="ic-ic-$text.get('key')"></span>
                <span class="text">$text.get('text')</span>
             </div>
        #end
        </div>
    #end
#end

## Render label above text
#macro (renderTextLabelAbove $title $body)
  #renderTextLabelAboveSpace($title $body "")
#end

#macro (renderTextLabelAboveSpace $title $body $space)
     #if($tool.hasContent($body) || $space != "")
        #if($tool.hasContent($title))
            <h4>$title</h4>
        #end
        #if($tool.hasContent($body))
            <p>$body</p>
        #else
            <p>$space</p>
        #end
    #end
#end

#macro (renderTextLabelDate $title $body)
     #if($tool.hasContent($body) || $space != "")
        #if($tool.hasContent($title))
            <h4>$title</h4>
        #end
        #if($tool.hasContent($body))
            <p class="helper icon">
                <span class="ic-ic-calendar"></span>
                <span class="text">$body</span>
            </p>
        #end
    #end
#end
## Render label above text
#macro (renderTextLabelDuring $entry)
    <div>
        <div>
        #if($tool.hasContent($entry.body))
            #if($tool.hasContent($entry.title))
                <div>$entry.title</div>
            #end
            <p>$entry.body</p>
        #end
       </div>
    </div>
#end

## Render label left from text
#macro (renderTextLabelLeft $title $body)
    #renderTextLabelLeftSpace($title $body "")
#end

#macro (renderTextLabelLeftSpace $title $body $space)
    #if($tool.hasContent($body))
        <div class="table--lined">
            <table>
                <tbody>
                    <tr>
                        <th>#if($tool.hasContent($title))$title#end</th>
                        <td>$body</td>
                    </tr>
                </tbody>
            </table>
        </div>
    #else 
        #if($space != "")
            #renderTextLabelLeft($title $space)
        #end
    #end
#end

#macro (renderTextLabelLeftLinkTable $entry)
    #if($tool.hasContent($entry))
    <div class="table table--lined">
        <table>
            <tbody>
                <tr>
                    <th>#if($tool.hasContent($entry.title))$entry.title#end</th>
                    <td>
                        #if($entry.body)
                            <div class="content--link">
                            #if($entry.body.type)
                                #if($entry.body.type == "linkLine")
                                    #renderLinkLine($entry.body)
                                #else
                                    $entry.body
                                #end
                            #else
                                $entry.body
                            #end
                            </div>
                        #end
                        #if($tool.hasContent($entry.link))
                            #if($entry.link.extMapUrl)
                            <a #if($mapLinksNewTab)target="_blank"#end class="button outline pill" href="$entry.link.extMapUrl" title="$MESSAGES.getString('common.result.showMap')">
                                $MESSAGES.getString('common.result.showMap')
                            </a>
                            #elseif($entry.link.href)
                            <a #if($mapLinksNewTab)target="_blank"#end class="button outline pill" href="$renderResponse.encodeURL('/portal/main-maps.psml')?layers=$entry.link.href" title="$MESSAGES.getString('common.result.showMap')">
                                $MESSAGES.getString('common.result.showMap')
                            </a>
                            #end
                        #end
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    #end
#end

## New function for KML
#macro (renderKML $entry)
    #if($tool.hasContent($entry.body))  
        <div>
           #foreach($e in $entry.body)
                <br style="clear:both"/>
                #renderGroupTitle($e.subtitle)
                #renderTable($e)
           #end
           #if($tool.hasContent($entry.title) && $tool.hasContent($entry.plugId) && $tool.hasContent($entry.docId))
                <div>
                    <a href="$renderResponse.encodeURL('/portal/main-maps.psml')?action=doTmpService&plugid=$entry.plugId&docid=$entry.docId" title="$MESSAGES.getString('common.alt.icon.intern')">$entry.title ($MESSAGES.getString('common.result.showCoord'))</a>
                </div>  
           #end
        </div>
        
    #end
#end

## Render elements
#macro (renderElements $elements)
    #set($hasAddMapScript = false)
    #foreach($e in $elements)
        #if($e.type)
            #if($e.type=="render")
                #set ($TOOL = $e.preparer)
                #parse ($TOOL.templateName)
            #elseif($e.type=="html")
                #if(!$hasAddMapScript)
                    #set($hasAddMapScript = true)
                    #parse("/WEB-INF/templates/global/include_leaflet_header.vm")
                #end
                $e.body
            #end
        #end
    #end
#end

## ***************************
## include the header here
## ***************************
#if($tool.hasContent($title))
    #set($pageTitle = $title)
    #set($pageDescription = $title)
#end

#if($tool.hasContent($description))
    #set($pageDescription = $description)
#end

#if($pageDescription)
    #set($pageDescription = $pageDescription.replace('"',"'"))
    #set($pageDescription = $stringTool.cutString($pageDescription,300))
#end

#set ($action = $renderResponse.createActionURL())
## Remove comment for new detail view
#if($renderElements)
    #renderElements($renderElements)
#else
    <div class="detail" id="detail">
        <div class="row search-filtered">
            <div class="columns">
               #renderMessageError($MESSAGES.getString("error_no_details_available"))
            </div>
        </div>
    </div>
#end
#parse('/WEB-INF/templates/scripts/include_script_filter_scroll.vm')
#parse('/WEB-INF/templates/scripts/include_script_filter_scroll_activate.vm')

## Copy button
#parse("/WEB-INF/templates/global/include_reference_copy_button.vm")