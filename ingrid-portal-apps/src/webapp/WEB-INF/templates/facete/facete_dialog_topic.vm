#set ($action = $renderResponse.createActionURL())
<div id="dialog_topic" class="facete_dialog" title="$MESSAGES.getString("searchResult.facete.title.topic")" dojoType="dijit.Dialog">
	<form name="topic_form" action="$action" method="post">
		<div class="dialog_content">
			#set($i = 0)
			#if($elementsTopicSelect)
    			<div class="dialog_sub_content">
        			<p class="dialog_sub_title">$MESSAGES.getString("searchResult.facete.selected.entries")</p>
        			#foreach ($topic in $elementsTopicSelect)
						#set($topicKey = "")
                		#foreach ($key in $topic.keySet())
                			#set($topicKey = $key)
                		#end
    					#set($topicTitle = "searchResult.facete.topic.$topicKey")
        				#set($isSelectedChbTopic = false)
        				#foreach ($selectChb in $selectedTopics)
        					#if($isSelectedChbTopic != true)
        						#if($topicKey == $selectChb)
        							#set($isSelectedChbTopic = true)
        						#end
        					#end
        				#end
        				#set($i = $i + 1)
        				<div class="facete_chb">
        					<span class="facete_label_dialog">
                    			<input id="$topicKey" class="facete_dialog_chb facete_input_chb" type=checkbox name="chk$i" value="$topicKey"
        							#if($isSelectedChbTopic)
        								checked
        							#end
                                >$MESSAGES.getString($topicTitle)</input>
        					</span>
							#if($topic.get($topicKey))
								#renderLinkEntryNumber("$topic.get($topicKey)")
							#end
                       	</div>
        			#end
    			</div>
			#end
			#if($elementsTopicUnused)
				<div class="dialog_sub_content">
        			<p class="dialog_sub_title">$MESSAGES.getString("searchResult.facete.result.entries")</p>
					#foreach ($topic in $elementsTopicUnused)
						#set($topicKey = "")
                		#foreach ($key in $topic.keySet())
                			#set($topicKey = $key)
                		#end
    					#set($topicTitle = "searchResult.facete.topic.$topicKey")
        				#set($isSelectedChbTopic = false)
        				#foreach ($selectChb in $selectedTopics)
        					#if($isSelectedChbTopic != true)
        						#if($topicKey == $selectChb)
        							#set($isSelectedChbTopic = true)
        						#end
        					#end
        				#end
        				#set($i = $i + 1)
        				<div class="facete_chb">
        					<span class="facete_label_dialog">
                    			<input id="$topicKey" class="facete_dialog_chb facete_input_chb" type=checkbox name="chk$i" value="$topicKey"
        							#if($isSelectedChbTopic)
        								checked
        							#end
                                >$MESSAGES.getString($topicTitle)</input>
        					</span>
							#if($topic.get($topicKey))
								#renderLinkEntryNumber("$topic.get($topicKey)")
							#end
                       	</div>
        			#end
    			</div>
			#end
        	#if($elementsTopicSelect)
        		#if($unselectedTopics)
            		<div>
            		<p class="dialog_sub_title">$MESSAGES.getString("searchResult.facete.unselected.entries")</p>
                    #foreach ($topic in $unselectedTopics)
            			#set($value = $topic.getFormValue())
            			#set($key = $value.toLowerCase())
            			#set($i = $i + 1)
            			<div class="facete_chb">
                    		<span class="facete_label_dialog">
            					<input id="$key" class="facete_dialog_chb facete_input_chb" type=checkbox name="chk$i" value="$key">
                        		#set($topicTitle = "searchResult.facete.topic.$key")
            					$MESSAGES.getString($topicTitle)
            				</span>
                       	</div>
            		#end
        		</div>
				#end
			#end
		</div>
		
		#renderInputButtonDialog($MESSAGES.getString('searchResult.facete.dialog.commit') "" "doAddTopic" $MESSAGES.getString('searchResult.facete.dialog.tooltip.commit') "float_right btn_submit_dialog" "")
	</form>
	<div class="dialog_bottom">
		#renderInputButtonDialogCancel($MESSAGES.getString('searchResult.facete.dialog.cancel') "padding:0px 5px 0px 0px" "" $MESSAGES.getString('searchResult.facete.dialog.tooltip.cancel') "float_right" "faceteDialogCancel('dialog_topic')")
		#renderInputButtonDialog($MESSAGES.getString('searchResult.facete.dialog.all.select') "padding:0px 5px 0px 0px" "" $MESSAGES.getString('searchResult.facete.dialog.tooltip.all.select') "float_left" "faceteDialogSelectAll(document.topic_form)")
		#renderInputButtonDialog($MESSAGES.getString('searchResult.facete.dialog.all.delete') "" "" $MESSAGES.getString('searchResult.facete.dialog.tooltip.all.delete') "float_left" "faceteDialogDeselectAll(document.topic_form)")
	</div>
</div>