## set flag indicating how to render stuff (e.g. in includes)
#set ($IS_RANKED = true)

<div class="section">
#parse ('/WEB-INF/templates/include_search_result_counter.vm')
<div class="resultset_nav">
&nbsp;
</div>
#parse ('/WEB-INF/templates/include_search_result_navigation.vm')
<br />

#if($rankedSearchFinished && $rankedResultList && "$rankedResultList.length()" != "0")
	#foreach($rs in $rankedResultList.hits)

		  <div class="resultset_partner_group">
## With Nr. of Hits
            <div class="ico_down_black"><span class="title">$rs.dataSourceName#if($rs.no_of_hits) ($rs.no_of_hits $MESSAGES.getString('common.result.hits'))#end</span><br /></div>
## Without Nr. of Hits
##			<div class="ico_down_black"><span class="title">$rs.source</span><br /></div>
            <p class="result_description">
              $rs.dataSourceDescription
            </p>
            <p class="result_metadata">
              $MESSAGES.getString('common.result.provider'): $rs.organisation
            </p>
          </div>

		#set ($topHit = true)
		#parse ('/WEB-INF/templates/search_catalog/include_thesaurus_result_hit.vm')
        #if($rs.subhit)
			#set ($rs = $rs.subhit)
			#set ($topHit = false)
##			#set ($subHitLeftMargin = 40)
	        #parse ('/WEB-INF/templates/search_catalog/include_thesaurus_result_hit.vm')
		#end

## we don't use include of footer because of specialities (further we don't have a group header ...)
        #if($rs.get('moreHits'))
       		<div class="line"><hr /></div>
       		<div class="resultset_show_partner">
                #set ($action = $renderResponse.createActionURL())
    			$action.setParameter('action', 'showAllForDomain')
    			$action.setParameter('grouping', 'domain')
    			$action.setParameter('subject', "plugid::$!rs.plugid")
				#set ($groupSubject = $rs.source)
    			<span class="result_title"><img src="/ingrid-portal-apps/images/icn_linkintern.gif" alt="$MESSAGES.getString('common.alt.icon.intern')" /><a href="$action">$MESSAGES.getString('common.result.group.showAll') $!{groupSubject}</a></span>
        	</div>
        #end
		<br />
	#end
#elseif($rankedSearchFinished)
		<p><strong>$MESSAGES.getString('common.result.noResults')</strong><br /><br /></p>
#else
		<p><strong>$MESSAGES.getString('common.result.interrupted')</strong><br /><br /></p>
#end
		#parse ('/WEB-INF/templates/include_search_result_counter.vm')
      <div class="resultset_nav">
        &nbsp;
      </div>
	  #parse ('/WEB-INF/templates/include_search_result_navigation.vm')
</div>
