#set ($action = $renderResponse.createActionURL())

#macro (renderRankedResultCounter $pageSelector)
        <strong>${pageSelector.numberOfFirstHit} - ${pageSelector.numberOfLastHit}</strong> von <strong>$pageSelector.numberOfHits</strong> Einträgen in <strong>Service</strong>
#end

#macro (renderRankedPageNavigation $pageSelector)
        (Seite <strong>$pageSelector.currentSelectorPage</strong> von <strong>$pageSelector.numberOfPages</strong>)
	#if($pageSelector.selectorHasPreviousPage)
        #set ($pstart = ($pageSelector.currentSelectorPage - 2) * $pageSelector.hitsPerPage)
    	$action.setParameter('rstart', $pstart.toString())	
    		<a href="$action">&laquo;</a>
    	$action.setParameter('rstart', "0")	
    		| <a href="$action">1</a> ..
    #end
	#foreach($pageId in [$pageSelector.firstSelectorPage..$pageSelector.lastSelectorPage])
    	#if($pageId == $pageSelector.currentSelectorPage)
    		| $pageId
    	#else
    		#set ($pstart = ($pageId - 1) * $pageSelector.hitsPerPage)
    		$action.setParameter('rstart', $pstart.toString())
    		| <a href="$action">$pageId</a>
    	#end
	#end
    #if($pageSelector.selectorHasNextPage)
        #set ($pstart = $pageSelector.currentSelectorPage * $pageSelector.hitsPerPage)
    	$action.setParameter('rstart', $pstart.toString())
    		| <a href="$action">&raquo;</a>
    #end
#end


    <div class="section ">    
      <div class="resultset_nav float_left">
#renderRankedResultCounter($rankedPageSelector)
      </div>
      <div class="resultset_nav">
#renderRankedPageNavigation($rankedPageSelector)
      </div>
      <br />
#foreach($rs in $rankedResultList)
	#if($velocityCount > 1)
      <div class="line"><hr /></div>
	#end
	  <div class="resultset">
        <span class="result_title"><strong><a href="$!rs.url" target="_new" title="Link öffnet in neuem Fenster"><span class="icon"><img src="/ingrid-portal-apps/images/icn_linkextern.gif" alt="externer Link"/></span>$!rs.date: $!rs.title </a></strong></span>
        <p class="result_description">
        $!rs.abstract 
        </p>
        <p class="result_metadata">
        Anbieter: $!rs.provider<br />
        Rubrik: $!rs.service_rubric
        </p>
        <p class="result_link">
          <a href="$!rs.url" target="_new" title="Link öffnet in neuem Fenster">$!rs.url</a>
        </p>
      </div>
#end
      <div class="resultset_nav float_left">
#renderRankedResultCounter($rankedPageSelector)
      </div>
      <div class="resultset_nav">
#renderRankedPageNavigation($rankedPageSelector)
      </div>
    </div>
